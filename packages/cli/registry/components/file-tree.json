{
  "name": "file-tree",
  "dependencies": [],
  "files": [
    {
      "path": "File.vue",
      "content": "<template>\r\n  <button\r\n    ref=\"fileRef\"\r\n    type=\"button\"\r\n    :disabled=\"!isSelectable\"\r\n    :class=\"[\r\n      cn(\r\n        'flex w-fit items-center gap-1 rounded-sm pr-1 text-sm duration-200 ease-in-out rtl:pl-1 rtl:pr-0',\r\n        isSelected && isSelectable ? 'bg-muted' : '',\r\n        isSelectable ? 'cursor-pointer' : 'cursor-not-allowed opacity-50',\r\n        $props.class,\r\n      ),\r\n    ]\"\r\n    :dir=\"direction\"\r\n    @click=\"onClickHandler\"\r\n  >\r\n    <Icon\r\n      :name=\"fileIcon\"\r\n      size=\"16\"\r\n    />\r\n    <span class=\"select-none\">{{ name }}</span>\r\n  </button>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type TreeContextProps, type FileProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject, computed, toRefs } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<FileProps>(), {\r\n  isSelectable: true,\r\n});\r\n\r\nconst { id, name, isSelectable, isSelect } = toRefs(props);\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[File] must be used inside <Tree>\");\r\n}\r\n\r\nconst { selectedId, selectItem, direction, fileIcon } = treeContext;\r\n\r\nconst isSelected = computed<boolean>(() => {\r\n  return isSelect.value || selectedId.value === id.value;\r\n});\r\n\r\nfunction onClickHandler() {\r\n  if (!isSelectable.value) return;\r\n  selectItem(id.value);\r\n}\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "File.vue",
      "content": "<template>\r\n  <button\r\n    ref=\"fileRef\"\r\n    type=\"button\"\r\n    :disabled=\"!isSelectable\"\r\n    :class=\"[\r\n      cn(\r\n        'flex w-fit items-center gap-1 rounded-sm pr-1 text-sm duration-200 ease-in-out rtl:pl-1 rtl:pr-0',\r\n        isSelected && isSelectable ? 'bg-muted' : '',\r\n        isSelectable ? 'cursor-pointer' : 'cursor-not-allowed opacity-50',\r\n        $props.class,\r\n      ),\r\n    ]\"\r\n    :dir=\"direction\"\r\n    @click=\"onClickHandler\"\r\n  >\r\n    <Icon\r\n      :name=\"fileIcon\"\r\n      size=\"16\"\r\n    />\r\n    <text class=\"select-none\">{{ name }}</text>\r\n  </button>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type TreeContextProps, type FileProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject, computed, toRefs } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<FileProps>(), {\r\n  isSelectable: true,\r\n});\r\n\r\nconst { id, name, isSelectable, isSelect } = toRefs(props);\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[File] must be used inside <Tree>\");\r\n}\r\n\r\nconst { selectedId, selectItem, direction, fileIcon } = treeContext;\r\n\r\nconst isSelected = computed<boolean>(() => {\r\n  return isSelect.value || selectedId.value === id.value;\r\n});\r\n\r\nfunction onClickHandler() {\r\n  if (!isSelectable.value) return;\r\n  selectItem(id.value);\r\n}\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "Folder.vue",
      "content": "<template>\r\n  <div class=\"relative h-full overflow-hidden\">\r\n    <div\r\n      class=\"flex cursor-pointer items-center gap-1 rounded-md text-sm transition-all duration-200\"\r\n      :class=\"[\r\n        cn(\r\n          'flex cursor-pointer items-center gap-1 rounded-md text-sm',\r\n          isSelect && isSelectable ? 'bg-muted' : '',\r\n          !isSelectable ? 'cursor-not-allowed opacity-50' : '',\r\n          $props.class,\r\n        ),\r\n      ]\"\r\n      :dir=\"direction\"\r\n      @click=\"onTriggerClick\"\r\n    >\r\n      <Icon\r\n        v-if=\"isExpanded\"\r\n        :name=\"openIcon\"\r\n        size=\"16\"\r\n      />\r\n      <Icon\r\n        v-else\r\n        :name=\"closeIcon\"\r\n        size=\"16\"\r\n      />\r\n\r\n      <span class=\"select-none\">{{ name }}</span>\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"isExpanded\"\r\n      class=\"relative text-sm\"\r\n    >\r\n      <TreeIndicator\r\n        v-if=\"name && indicator\"\r\n        aria-hidden=\"true\"\r\n      />\r\n      <div\r\n        class=\"ml-5 flex flex-col gap-1 py-1 rtl:mr-5\"\r\n        :dir=\"direction\"\r\n      >\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type TreeContextProps, type FolderProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject, computed, toRefs } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<FolderProps>(), {\r\n  isSelectable: true,\r\n});\r\n\r\nconst { id, name, isSelectable, isSelect } = toRefs(props);\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[Folder] must be used inside <Tree>\");\r\n}\r\n\r\nconst { expandedItems, handleExpand, openIcon, closeIcon, direction, indicator } = treeContext;\r\n\r\nconst isExpanded = computed<boolean>(() => {\r\n  return !!expandedItems.value?.includes(id.value);\r\n});\r\n\r\nfunction onTriggerClick() {\r\n  if (!isSelectable.value) return;\r\n  handleExpand(id.value);\r\n}\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "Folder.vue",
      "content": "<template>\r\n  <view class=\"relative h-full overflow-hidden\">\r\n    <view\r\n      class=\"flex cursor-pointer items-center gap-1 rounded-md text-sm transition-all duration-200\"\r\n      :class=\"[\r\n        cn(\r\n          'flex cursor-pointer items-center gap-1 rounded-md text-sm',\r\n          isSelect && isSelectable ? 'bg-muted' : '',\r\n          !isSelectable ? 'cursor-not-allowed opacity-50' : '',\r\n          $props.class,\r\n        ),\r\n      ]\"\r\n      :dir=\"direction\"\r\n      @click=\"onTriggerClick\"\r\n    >\r\n      <Icon\r\n        v-if=\"isExpanded\"\r\n        :name=\"openIcon\"\r\n        size=\"16\"\r\n      />\r\n      <Icon\r\n        v-else\r\n        :name=\"closeIcon\"\r\n        size=\"16\"\r\n      />\r\n\r\n      <text class=\"select-none\">{{ name }}</text>\r\n    </view>\r\n\r\n    <view\r\n      v-if=\"isExpanded\"\r\n      class=\"relative text-sm\"\r\n    >\r\n      <TreeIndicator\r\n        v-if=\"name && indicator\"\r\n        aria-hidden=\"true\"\r\n      />\r\n      <view\r\n        class=\"ml-5 flex flex-col gap-1 py-1 rtl:mr-5\"\r\n        :dir=\"direction\"\r\n      >\r\n        <slot />\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type TreeContextProps, type FolderProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject, computed, toRefs } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<FolderProps>(), {\r\n  isSelectable: true,\r\n});\r\n\r\nconst { id, name, isSelectable, isSelect } = toRefs(props);\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[Folder] must be used inside <Tree>\");\r\n}\r\n\r\nconst { expandedItems, handleExpand, openIcon, closeIcon, direction, indicator } = treeContext;\r\n\r\nconst isExpanded = computed<boolean>(() => {\r\n  return !!expandedItems.value?.includes(id.value);\r\n});\r\n\r\nfunction onTriggerClick() {\r\n  if (!isSelectable.value) return;\r\n  handleExpand(id.value);\r\n}\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "index.ts",
      "content": "import type { HTMLAttributes } from \"vue\";\r\n\r\nexport interface TreeViewElement {\r\n  id: string;\r\n  name: string;\r\n  isSelectable?: boolean;\r\n  children?: TreeViewElement[];\r\n}\r\n\r\nexport interface TreeProps {\r\n  class?: HTMLAttributes[\"class\"];\r\n  initialSelectedId: string;\r\n  indicator?: boolean;\r\n  elements: TreeViewElement[];\r\n  initialExpandedItems: string[];\r\n  openIcon?: string;\r\n  closeIcon?: string;\r\n  fileIcon?: string;\r\n  direction?: \"rtl\" | \"ltr\";\r\n}\r\n\r\nexport interface TreeContextProps {\r\n  selectedId: Ref<string | undefined>;\r\n  expandedItems: Ref<string[] | undefined>;\r\n  indicator: boolean;\r\n  openIcon: string;\r\n  closeIcon: string;\r\n  fileIcon: string;\r\n  direction: \"rtl\" | \"ltr\";\r\n  handleExpand: (id: string) => void;\r\n  selectItem: (id: string) => void;\r\n  setExpandedItems: (items: string[] | undefined) => void;\r\n}\r\n\r\nexport interface BaseItemProps {\r\n  class?: HTMLAttributes[\"class\"];\r\n  id: string;\r\n  name: string;\r\n  isSelectable?: boolean;\r\n  isSelect?: boolean;\r\n}\r\n\r\nexport interface FolderProps extends BaseItemProps {}\r\n\r\nexport interface FileProps extends BaseItemProps {}\r\n\r\nexport const TREE_CONTEXT_SYMBOL = Symbol(\"TREE_CONTEXT_SYMBOL\");\r\n\r\nexport { default as Tree } from \"./Tree.vue\";\r\nexport { default as Folder } from \"./Folder.vue\";\r\nexport { default as File } from \"./File.vue\";\r\nexport { default as TreeIndicator } from \"./TreeIndicator.vue\";\r\n"
    },
    {
      "path": "Tree.vue",
      "content": "<template>\r\n  <div :class=\"cn('size-full', $props.class)\">\r\n    <div\r\n      ref=\"rootRef\"\r\n      class=\"relative h-full overflow-auto px-2\"\r\n      :dir=\"direction\"\r\n    >\r\n      <div class=\"flex flex-col gap-1\">\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  type TreeContextProps,\r\n  type TreeViewElement,\r\n  type TreeProps,\r\n  TREE_CONTEXT_SYMBOL,\r\n} from \"./index\";\r\nimport { inject, computed, toRefs, ref, onMounted, provide } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<TreeProps>(), {\r\n  indicator: true,\r\n  dir: \"ltr\",\r\n  openIcon: \"lucide:folder-open\",\r\n  closeIcon: \"lucide:folder\",\r\n  fileIcon: \"lucide:file\",\r\n});\r\n\r\nconst {\r\n  initialSelectedId,\r\n  indicator,\r\n  elements,\r\n  initialExpandedItems,\r\n  openIcon,\r\n  closeIcon,\r\n  fileIcon,\r\n  direction,\r\n} = toRefs(props);\r\n\r\nconst selectedId = ref<string | undefined>(initialSelectedId.value);\r\nconst expandedItems = ref<string[] | undefined>(initialExpandedItems.value);\r\n\r\nfunction handleExpand(id: string) {\r\n  expandedItems.value = expandedItems.value ?? [];\r\n  if (expandedItems.value.includes(id)) {\r\n    // If already expanded, collapse it\r\n    expandedItems.value = expandedItems.value.filter((item) => item !== id);\r\n  } else {\r\n    // Otherwise, expand it\r\n    expandedItems.value.push(id);\r\n  }\r\n}\r\n\r\nfunction selectItem(id: string) {\r\n  selectedId.value = id;\r\n}\r\n\r\nfunction setExpandedItemsFn(items: string[] | undefined) {\r\n  expandedItems.value = items;\r\n}\r\n\r\nprovide<TreeContextProps>(TREE_CONTEXT_SYMBOL, {\r\n  selectedId,\r\n  expandedItems,\r\n  indicator: indicator.value,\r\n  openIcon: openIcon.value,\r\n  closeIcon: closeIcon.value,\r\n  fileIcon: fileIcon.value,\r\n  direction: direction.value === \"rtl\" ? \"rtl\" : \"ltr\",\r\n  handleExpand,\r\n  selectItem,\r\n  setExpandedItems: setExpandedItemsFn,\r\n});\r\n\r\nfunction expandSpecificTargetedElements(list?: TreeViewElement[], selectId?: string) {\r\n  if (!list || !selectId) return;\r\n  function findParent(current: TreeViewElement, path: string[] = []) {\r\n    const isSelectable = current.isSelectable ?? true;\r\n    const newPath = [...path, current.id];\r\n    if (current.id === selectId) {\r\n      if (isSelectable) {\r\n        expandedItems.value = [...(expandedItems.value ?? []), ...newPath];\r\n      } else {\r\n        // if not selectable, pop the last item (itself)\r\n        newPath.pop();\r\n        expandedItems.value = [...(expandedItems.value ?? []), ...newPath];\r\n      }\r\n      return;\r\n    }\r\n    if (current.children?.length) {\r\n      current.children.forEach((child: TreeViewElement) => findParent(child, newPath));\r\n    }\r\n  }\r\n  list.forEach((element: TreeViewElement) => findParent(element));\r\n}\r\n\r\nonMounted(() => {\r\n  if (initialSelectedId.value) {\r\n    expandSpecificTargetedElements(elements.value, initialSelectedId.value);\r\n  }\r\n});\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "Tree.vue",
      "content": "<template>\r\n  <view :class=\"cn('size-full', $props.class)\">\r\n    <view\r\n      ref=\"rootRef\"\r\n      class=\"relative h-full overflow-auto px-2\"\r\n      :dir=\"direction\"\r\n    >\r\n      <view class=\"flex flex-col gap-1\">\r\n        <slot />\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n  type TreeContextProps,\r\n  type TreeViewElement,\r\n  type TreeProps,\r\n  TREE_CONTEXT_SYMBOL,\r\n} from \"./index\";\r\nimport { inject, computed, toRefs, ref, onMounted, provide } from \"vue\";\r\n\r\nconst props = withDefaults(defineProps<TreeProps>(), {\r\n  indicator: true,\r\n  dir: \"ltr\",\r\n  openIcon: \"lucide:folder-open\",\r\n  closeIcon: \"lucide:folder\",\r\n  fileIcon: \"lucide:file\",\r\n});\r\n\r\nconst {\r\n  initialSelectedId,\r\n  indicator,\r\n  elements,\r\n  initialExpandedItems,\r\n  openIcon,\r\n  closeIcon,\r\n  fileIcon,\r\n  direction,\r\n} = toRefs(props);\r\n\r\nconst selectedId = ref<string | undefined>(initialSelectedId.value);\r\nconst expandedItems = ref<string[] | undefined>(initialExpandedItems.value);\r\n\r\nfunction handleExpand(id: string) {\r\n  expandedItems.value = expandedItems.value ?? [];\r\n  if (expandedItems.value.includes(id)) {\r\n    // If already expanded, collapse it\r\n    expandedItems.value = expandedItems.value.filter((item) => item !== id);\r\n  } else {\r\n    // Otherwise, expand it\r\n    expandedItems.value.push(id);\r\n  }\r\n}\r\n\r\nfunction selectItem(id: string) {\r\n  selectedId.value = id;\r\n}\r\n\r\nfunction setExpandedItemsFn(items: string[] | undefined) {\r\n  expandedItems.value = items;\r\n}\r\n\r\nprovide<TreeContextProps>(TREE_CONTEXT_SYMBOL, {\r\n  selectedId,\r\n  expandedItems,\r\n  indicator: indicator.value,\r\n  openIcon: openIcon.value,\r\n  closeIcon: closeIcon.value,\r\n  fileIcon: fileIcon.value,\r\n  direction: direction.value === \"rtl\" ? \"rtl\" : \"ltr\",\r\n  handleExpand,\r\n  selectItem,\r\n  setExpandedItems: setExpandedItemsFn,\r\n});\r\n\r\nfunction expandSpecificTargetedElements(list?: TreeViewElement[], selectId?: string) {\r\n  if (!list || !selectId) return;\r\n  function findParent(current: TreeViewElement, path: string[] = []) {\r\n    const isSelectable = current.isSelectable ?? true;\r\n    const newPath = [...path, current.id];\r\n    if (current.id === selectId) {\r\n      if (isSelectable) {\r\n        expandedItems.value = [...(expandedItems.value ?? []), ...newPath];\r\n      } else {\r\n        // if not selectable, pop the last item (itself)\r\n        newPath.pop();\r\n        expandedItems.value = [...(expandedItems.value ?? []), ...newPath];\r\n      }\r\n      return;\r\n    }\r\n    if (current.children?.length) {\r\n      current.children.forEach((child: TreeViewElement) => findParent(child, newPath));\r\n    }\r\n  }\r\n  list.forEach((element: TreeViewElement) => findParent(element));\r\n}\r\n\r\nonMounted(() => {\r\n  if (initialSelectedId.value) {\r\n    expandSpecificTargetedElements(elements.value, initialSelectedId.value);\r\n  }\r\n});\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "TreeIndicator.vue",
      "content": "<template>\r\n  <div\r\n    :dir=\"direction\"\r\n    class=\"absolute left-1.5 h-full w-px rounded-md bg-muted py-3 duration-300 ease-in-out hover:bg-slate-300 rtl:right-1.5\"\r\n  />\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { type TreeContextProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject } from \"vue\";\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[TreeIndicator] must be used inside <Tree>\");\r\n}\r\n\r\nconst { direction } = treeContext;\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "TreeIndicator.vue",
      "content": "<template>\r\n  <view\r\n    :dir=\"direction\"\r\n    class=\"absolute left-1.5 h-full w-px rounded-md bg-muted py-3 duration-300 ease-in-out hover:bg-slate-300 rtl:right-1.5\"\r\n  />\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { type TreeContextProps, TREE_CONTEXT_SYMBOL } from \"./index\";\r\nimport { inject } from \"vue\";\r\n\r\nconst treeContext = inject<TreeContextProps>(TREE_CONTEXT_SYMBOL);\r\nif (!treeContext) {\r\n  throw new Error(\"[TreeIndicator] must be used inside <Tree>\");\r\n}\r\n\r\nconst { direction } = treeContext;\r\n</script>\r\n",
      "target": "uniapp"
    }
  ],
  "fileCount": 9,
  "contentHash": "6bdbb68490ff8a05e9143a8e383bd19d822cedf9"
}
