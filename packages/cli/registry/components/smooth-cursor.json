{
  "name": "smooth-cursor",
  "dependencies": [
    "@vueuse/core",
    "motion-v"
  ],
  "files": [
    {
      "path": "DefaultCursor.vue",
      "content": "<template>\r\n  <svg\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width=\"32\"\r\n    height=\"32\"\r\n    viewBox=\"0 0 32 32\"\r\n  >\r\n    <path\r\n      fill=\"currentColor\"\r\n      d=\"M9.391 2.32C8.42 1.56 7 2.253 7 3.486V28.41c0 1.538 1.966 2.18 2.874.938l6.225-8.523a2 2 0 0 1 1.615-.82h9.69c1.512 0 2.17-1.912.978-2.844z\"\r\n    />\r\n  </svg>\r\n</template>\r\n"
    },
    {
      "path": "index.ts",
      "content": "export { default as SmoothCursor } from \"./SmoothCursor.vue\";\r\n"
    },
    {
      "path": "SmoothCursor.vue",
      "content": "<template>\r\n  <Motion\r\n    as=\"div\"\r\n    :style=\"{\r\n      position: 'fixed',\r\n      left: cursorX,\r\n      top: cursorY,\r\n      translateX: '-50%',\r\n      translateY: '-50%',\r\n      rotate: rotation,\r\n      scale: scale,\r\n      zIndex: 100,\r\n      pointerEvents: 'none',\r\n      willChange: 'transform',\r\n    }\"\r\n    :initial=\"{ scale: 0 }\"\r\n    :animate=\"{ scale: 1 }\"\r\n    :transition=\"{\r\n      type: 'spring',\r\n      stiffness: 400,\r\n      damping: 30,\r\n    }\"\r\n  >\r\n    <component :is=\"props.cursor\" />\r\n  </Motion>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { Component } from \"vue\";\r\nimport DefaultCursor from \"./DefaultCursor.vue\";\r\nimport { useSpring, Motion } from \"motion-v\";\r\nimport { useEventListener, useTimeout } from \"@vueuse/core\";\r\n\r\ninterface Position {\r\n  x: number;\r\n  y: number;\r\n}\r\ninterface SmoothCursorProps {\r\n  cursor?: Component;\r\n  springConfig?: {\r\n    damping: number;\r\n    stiffness: number;\r\n    mass: number;\r\n    restDelta: number;\r\n  };\r\n}\r\n\r\nconst props = withDefaults(defineProps<SmoothCursorProps>(), {\r\n  cursor: () => DefaultCursor,\r\n  springConfig: () => ({\r\n    damping: 45,\r\n    stiffness: 400,\r\n    mass: 1,\r\n    restDelta: 0.001,\r\n  }),\r\n});\r\n\r\nconst isMoving = ref(false);\r\nconst lastMousePos = ref<Position>({ x: 0, y: 0 });\r\nconst velocity = ref<Position>({ x: 0, y: 0 });\r\nconst lastUpdateTime = ref(Date.now());\r\nconst previousAngle = ref(0);\r\nconst accumulatedRotation = ref(0);\r\n\r\nconst cursorX = useSpring(0, props.springConfig);\r\nconst cursorY = useSpring(0, props.springConfig);\r\nconst rotation = useSpring(0, {\r\n  ...props.springConfig,\r\n  damping: 60,\r\n  stiffness: 300,\r\n});\r\nconst scale = useSpring(1, {\r\n  ...props.springConfig,\r\n  stiffness: 500,\r\n  damping: 35,\r\n});\r\n\r\nfunction updateVelocity(currentPos: Position) {\r\n  const currentTime = Date.now();\r\n  const deltaTime = currentTime - lastUpdateTime.value;\r\n\r\n  if (deltaTime > 0) {\r\n    velocity.value = {\r\n      x: (currentPos.x - lastMousePos.value.x) / deltaTime,\r\n      y: (currentPos.y - lastMousePos.value.y) / deltaTime,\r\n    };\r\n  }\r\n\r\n  lastUpdateTime.value = currentTime;\r\n  lastMousePos.value = currentPos;\r\n}\r\n\r\nfunction smoothMouseMove(e: MouseEvent) {\r\n  const currentPos = { x: e.clientX, y: e.clientY };\r\n  updateVelocity(currentPos);\r\n\r\n  const speed = Math.sqrt(Math.pow(velocity.value.x, 2) + Math.pow(velocity.value.y, 2));\r\n\r\n  cursorX.set(currentPos.x);\r\n  cursorY.set(currentPos.y);\r\n\r\n  if (speed > 0.1) {\r\n    const currentAngle = Math.atan2(velocity.value.y, velocity.value.x) * (180 / Math.PI) + 90;\r\n\r\n    let angleDiff = currentAngle - previousAngle.value;\r\n    if (angleDiff > 180) angleDiff -= 360;\r\n    if (angleDiff < -180) angleDiff += 360;\r\n    accumulatedRotation.value += angleDiff;\r\n    rotation.set(accumulatedRotation.value);\r\n    previousAngle.value = currentAngle;\r\n\r\n    scale.set(0.95);\r\n    isMoving.value = true;\r\n\r\n    useTimeout(150, {\r\n      callback: () => {\r\n        scale.set(1);\r\n        isMoving.value = false;\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nlet rafId: number;\r\n\r\nfunction throttledMouseMove(e: MouseEvent) {\r\n  if (rafId) return;\r\n\r\n  rafId = requestAnimationFrame(() => {\r\n    smoothMouseMove(e);\r\n    rafId = 0;\r\n  });\r\n}\r\n\r\ndocument.body.style.cursor = \"none\";\r\nuseEventListener(window, \"mousemove\", throttledMouseMove);\r\n\r\nonUnmounted(() => {\r\n  if (rafId) cancelAnimationFrame(rafId);\r\n  document.body.style.cursor = \"default\";\r\n});\r\n</script>\r\n<style scoped></style>\r\n"
    }
  ],
  "fileCount": 3,
  "contentHash": "27cf030e0499af7da467680730d8b3f947b0f9e8"
}
