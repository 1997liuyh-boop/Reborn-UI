{
  "name": "direction-aware-hover",
  "dependencies": [],
  "files": [
    {
      "path": "DirectionAwareHover.vue",
      "content": "<template>\r\n  <div\r\n    ref=\"divRef\"\r\n    :class=\"containerClass\"\r\n    @mouseenter=\"handleMouseEnter\"\r\n    @mouseleave=\"handleMouseLeave\"\r\n    @touchstart=\"handleTouchStart\"\r\n    @touchend=\"handleTouchEnd\"\r\n  >\r\n    <div class=\"relative size-full overflow-hidden\">\r\n      <transition name=\"fade\">\r\n        <div\r\n          v-show=\"direction !== null\"\r\n          :class=\"overlayClass\"\r\n        />\r\n      </transition>\r\n      <div\r\n        class=\"relative size-full bg-gray-50 transition-transform duration-300 dark:bg-black\"\r\n        :class=\"imageContainerClass\"\r\n      >\r\n        <img\r\n          :src=\"imageUrl\"\r\n          alt=\"image\"\r\n          :class=\"imageClass\"\r\n          width=\"1000\"\r\n          height=\"1000\"\r\n        />\r\n      </div>\r\n      <transition name=\"fade\">\r\n        <div\r\n          v-show=\"direction !== null || isTouched\"\r\n          :class=\"childrenClass\"\r\n        >\r\n          <slot />\r\n        </div>\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Props {\r\n  imageUrl: string;\r\n  childrenClass?: string;\r\n  imageClass?: string;\r\n  class?: string;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  childrenClass: undefined,\r\n  imageClass: undefined,\r\n  class: undefined,\r\n});\r\n\r\nconst divRef = ref<HTMLDivElement | null>(null);\r\nconst direction = ref<\"top\" | \"bottom\" | \"left\" | \"right\" | null>(null);\r\nconst isTouched = ref(false);\r\nconst isMobile = ref(false);\r\n\r\n// Touch timer for mobile interactions\r\nlet touchTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\nfunction detectMobile() {\r\n  isMobile.value = window.matchMedia(\"(max-width: 768px)\").matches || \"ontouchstart\" in window;\r\n}\r\n\r\nfunction handleMouseEnter(event: MouseEvent) {\r\n  if (isMobile.value) return;\r\n\r\n  if (!divRef.value) return;\r\n  const fetchedDirection = getDirection(event, divRef.value);\r\n\r\n  switch (fetchedDirection) {\r\n    case 0:\r\n      direction.value = \"top\";\r\n      break;\r\n    case 1:\r\n      direction.value = \"right\";\r\n      break;\r\n    case 2:\r\n      direction.value = \"bottom\";\r\n      break;\r\n    case 3:\r\n      direction.value = \"left\";\r\n      break;\r\n    default:\r\n      direction.value = \"left\";\r\n      break;\r\n  }\r\n}\r\n\r\nfunction handleMouseLeave() {\r\n  if (isMobile.value) return;\r\n  direction.value = null;\r\n}\r\n\r\nfunction handleTouchStart(event: TouchEvent) {\r\n  if (!isMobile.value) return;\r\n\r\n  isTouched.value = true;\r\n\r\n  if (!divRef.value) return;\r\n  const touch = event.touches[0];\r\n  const mouseEvent = new MouseEvent(\"mouseenter\", {\r\n    clientX: touch.clientX,\r\n    clientY: touch.clientY,\r\n  });\r\n\r\n  const fetchedDirection = getDirection(mouseEvent, divRef.value);\r\n\r\n  switch (fetchedDirection) {\r\n    case 0:\r\n      direction.value = \"top\";\r\n      break;\r\n    case 1:\r\n      direction.value = \"right\";\r\n      break;\r\n    case 2:\r\n      direction.value = \"bottom\";\r\n      break;\r\n    case 3:\r\n      direction.value = \"left\";\r\n      break;\r\n    default:\r\n      direction.value = \"left\";\r\n      break;\r\n  }\r\n\r\n  // Auto-hide after 3 seconds on mobile\r\n  if (touchTimer) clearTimeout(touchTimer);\r\n  touchTimer = setTimeout(() => {\r\n    handleTouchEnd();\r\n  }, 3000);\r\n}\r\n\r\nfunction handleTouchEnd() {\r\n  if (touchTimer) {\r\n    clearTimeout(touchTimer);\r\n    touchTimer = null;\r\n  }\r\n\r\n  setTimeout(() => {\r\n    direction.value = null;\r\n    isTouched.value = false;\r\n  }, 300);\r\n}\r\n\r\nfunction getDirection(ev: MouseEvent, obj: HTMLElement) {\r\n  const { width: w, height: h, left, top } = obj.getBoundingClientRect();\r\n  const x = ev.clientX - left - (w / 2) * (w > h ? h / w : 1);\r\n  const y = ev.clientY - top - (h / 2) * (h > w ? w / h : 1);\r\n  const d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;\r\n  return d;\r\n}\r\n\r\nconst containerClass = computed(() =>\r\n  cn(\r\n    \"group/card relative overflow-hidden rounded-lg bg-transparent transition-all duration-300\",\r\n    // Mobile first responsive sizing\r\n    \"h-48 w-48\", // Base mobile size\r\n    \"xs:h-56 xs:w-56\", // Extra small screens\r\n    \"sm:h-64 sm:w-64\", // Small screens\r\n    \"md:h-80 md:w-80\", // Medium screens\r\n    \"lg:h-96 lg:w-96\", // Large screens\r\n    \"xl:h-[28rem] xl:w-[28rem]\", // Extra large screens\r\n    // Mobile touch improvements\r\n    \"touch-manipulation\",\r\n    \"active:scale-[0.98]\",\r\n    \"md:active:scale-100\", // Disable scale on desktop\r\n    props.class,\r\n  ),\r\n);\r\n\r\nconst imageClass = computed(() =>\r\n  cn(\r\n    \"h-full w-full object-cover transition-transform duration-300\",\r\n    // Responsive scaling\r\n    \"scale-125\", // Mobile\r\n    \"sm:scale-135\", // Small screens\r\n    \"md:scale-150\", // Desktop\r\n    props.imageClass,\r\n  ),\r\n);\r\n\r\nconst childrenClass = computed(() =>\r\n  cn(\r\n    \"absolute z-40 text-white transition-opacity duration-300\",\r\n    // Responsive positioning\r\n    \"bottom-2 left-2 text-sm\", // Mobile\r\n    \"sm:bottom-3 sm:left-3 sm:text-base\", // Small screens\r\n    \"md:bottom-4 md:left-4 md:text-lg\", // Desktop\r\n    props.childrenClass,\r\n  ),\r\n);\r\n\r\nconst overlayClass = computed(() => {\r\n  const baseClasses = \"absolute inset-0 z-10 transition-all duration-300\";\r\n  const backgroundClasses = \"bg-black/40 dark:bg-black/60\";\r\n\r\n  let transformClasses = \"\";\r\n\r\n  switch (direction.value) {\r\n    case \"top\":\r\n      transformClasses = \"-translate-y-full\";\r\n      break;\r\n    case \"bottom\":\r\n      transformClasses = \"translate-y-full\";\r\n      break;\r\n    case \"left\":\r\n      transformClasses = \"-translate-x-full\";\r\n      break;\r\n    case \"right\":\r\n      transformClasses = \"translate-x-full\";\r\n      break;\r\n    default:\r\n      transformClasses = \"\";\r\n  }\r\n\r\n  return cn(baseClasses, backgroundClasses, transformClasses);\r\n});\r\n\r\nconst imageContainerClass = computed(() => ({\r\n  // Reduced movement on mobile for better UX\r\n  \"translate-y-2 md:translate-y-5\": direction.value === \"top\",\r\n  \"-translate-y-2 md:-translate-y-5\": direction.value === \"bottom\",\r\n  \"translate-x-2 md:translate-x-5\": direction.value === \"left\",\r\n  \"-translate-x-2 md:-translate-x-5\": direction.value === \"right\",\r\n}));\r\n\r\nonMounted(() => {\r\n  detectMobile();\r\n  window.addEventListener(\"resize\", detectMobile);\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener(\"resize\", detectMobile);\r\n  if (touchTimer) {\r\n    clearTimeout(touchTimer);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n/* Enhanced mobile touch targets */\r\n@media (max-width: 768px) {\r\n  .group\\/card {\r\n    min-height: 44px; /* iOS minimum touch target */\r\n    min-width: 44px;\r\n  }\r\n}\r\n\r\n/* Smooth transitions for mobile */\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.1s !important;\r\n  }\r\n}\r\n</style>\r\n",
      "target": "web"
    },
    {
      "path": "DirectionAwareHover.vue",
      "content": "<template>\r\n  <view\r\n    ref=\"divRef\"\r\n    :class=\"containerClass\"\r\n    @mouseenter=\"handleMouseEnter\"\r\n    @mouseleave=\"handleMouseLeave\"\r\n    @touchstart=\"handleTouchStart\"\r\n    @touchend=\"handleTouchEnd\"\r\n  >\r\n    <view class=\"relative size-full overflow-hidden\">\r\n      <transition name=\"fade\">\r\n        <view\r\n          v-show=\"direction !== null\"\r\n          :class=\"overlayClass\"\r\n        />\r\n      </transition>\r\n      <view\r\n        class=\"relative size-full bg-gray-50 transition-transform duration-300 dark:bg-black\"\r\n        :class=\"imageContainerClass\"\r\n      >\r\n        <image\r\n          :src=\"imageUrl\"\r\n          alt=\"image\"\r\n          :class=\"imageClass\"\r\n          width=\"1000\"\r\n          height=\"1000\"\r\n        />\r\n      </view>\r\n      <transition name=\"fade\">\r\n        <view\r\n          v-show=\"direction !== null || isTouched\"\r\n          :class=\"childrenClass\"\r\n        >\r\n          <slot />\r\n        </view>\r\n      </transition>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Props {\r\n  imageUrl: string;\r\n  childrenClass?: string;\r\n  imageClass?: string;\r\n  class?: string;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  childrenClass: undefined,\r\n  imageClass: undefined,\r\n  class: undefined,\r\n});\r\n\r\nconst divRef = ref<HTMLDivElement | null>(null);\r\nconst direction = ref<\"top\" | \"bottom\" | \"left\" | \"right\" | null>(null);\r\nconst isTouched = ref(false);\r\nconst isMobile = ref(false);\r\n\r\n// Touch timer for mobile interactions\r\nlet touchTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\nfunction detectMobile() {\r\n  isMobile.value = window.matchMedia(\"(max-width: 768px)\").matches || \"ontouchstart\" in window;\r\n}\r\n\r\nfunction handleMouseEnter(event: MouseEvent) {\r\n  if (isMobile.value) return;\r\n\r\n  if (!divRef.value) return;\r\n  const fetchedDirection = getDirection(event, divRef.value);\r\n\r\n  switch (fetchedDirection) {\r\n    case 0:\r\n      direction.value = \"top\";\r\n      break;\r\n    case 1:\r\n      direction.value = \"right\";\r\n      break;\r\n    case 2:\r\n      direction.value = \"bottom\";\r\n      break;\r\n    case 3:\r\n      direction.value = \"left\";\r\n      break;\r\n    default:\r\n      direction.value = \"left\";\r\n      break;\r\n  }\r\n}\r\n\r\nfunction handleMouseLeave() {\r\n  if (isMobile.value) return;\r\n  direction.value = null;\r\n}\r\n\r\nfunction handleTouchStart(event: TouchEvent) {\r\n  if (!isMobile.value) return;\r\n\r\n  isTouched.value = true;\r\n\r\n  if (!divRef.value) return;\r\n  const touch = event.touches[0];\r\n  const mouseEvent = new MouseEvent(\"mouseenter\", {\r\n    clientX: touch.clientX,\r\n    clientY: touch.clientY,\r\n  });\r\n\r\n  const fetchedDirection = getDirection(mouseEvent, divRef.value);\r\n\r\n  switch (fetchedDirection) {\r\n    case 0:\r\n      direction.value = \"top\";\r\n      break;\r\n    case 1:\r\n      direction.value = \"right\";\r\n      break;\r\n    case 2:\r\n      direction.value = \"bottom\";\r\n      break;\r\n    case 3:\r\n      direction.value = \"left\";\r\n      break;\r\n    default:\r\n      direction.value = \"left\";\r\n      break;\r\n  }\r\n\r\n  // Auto-hide after 3 seconds on mobile\r\n  if (touchTimer) clearTimeout(touchTimer);\r\n  touchTimer = setTimeout(() => {\r\n    handleTouchEnd();\r\n  }, 3000);\r\n}\r\n\r\nfunction handleTouchEnd() {\r\n  if (touchTimer) {\r\n    clearTimeout(touchTimer);\r\n    touchTimer = null;\r\n  }\r\n\r\n  setTimeout(() => {\r\n    direction.value = null;\r\n    isTouched.value = false;\r\n  }, 300);\r\n}\r\n\r\nfunction getDirection(ev: MouseEvent, obj: HTMLElement) {\r\n  const { width: w, height: h, left, top } = obj.getBoundingClientRect();\r\n  const x = ev.clientX - left - (w / 2) * (w > h ? h / w : 1);\r\n  const y = ev.clientY - top - (h / 2) * (h > w ? w / h : 1);\r\n  const d = Math.round(Math.atan2(y, x) / 1.57079633 + 5) % 4;\r\n  return d;\r\n}\r\n\r\nconst containerClass = computed(() =>\r\n  cn(\r\n    \"group/card relative overflow-hidden rounded-lg bg-transparent transition-all duration-300\",\r\n    // Mobile first responsive sizing\r\n    \"h-48 w-48\", // Base mobile size\r\n    \"xs:h-56 xs:w-56\", // Extra small screens\r\n    \"sm:h-64 sm:w-64\", // Small screens\r\n    \"md:h-80 md:w-80\", // Medium screens\r\n    \"lg:h-96 lg:w-96\", // Large screens\r\n    \"xl:h-[28rem] xl:w-[28rem]\", // Extra large screens\r\n    // Mobile touch improvements\r\n    \"touch-manipulation\",\r\n    \"active:scale-[0.98]\",\r\n    \"md:active:scale-100\", // Disable scale on desktop\r\n    props.class,\r\n  ),\r\n);\r\n\r\nconst imageClass = computed(() =>\r\n  cn(\r\n    \"h-full w-full object-cover transition-transform duration-300\",\r\n    // Responsive scaling\r\n    \"scale-125\", // Mobile\r\n    \"sm:scale-135\", // Small screens\r\n    \"md:scale-150\", // Desktop\r\n    props.imageClass,\r\n  ),\r\n);\r\n\r\nconst childrenClass = computed(() =>\r\n  cn(\r\n    \"absolute z-40 text-white transition-opacity duration-300\",\r\n    // Responsive positioning\r\n    \"bottom-2 left-2 text-sm\", // Mobile\r\n    \"sm:bottom-3 sm:left-3 sm:text-base\", // Small screens\r\n    \"md:bottom-4 md:left-4 md:text-lg\", // Desktop\r\n    props.childrenClass,\r\n  ),\r\n);\r\n\r\nconst overlayClass = computed(() => {\r\n  const baseClasses = \"absolute inset-0 z-10 transition-all duration-300\";\r\n  const backgroundClasses = \"bg-black/40 dark:bg-black/60\";\r\n\r\n  let transformClasses = \"\";\r\n\r\n  switch (direction.value) {\r\n    case \"top\":\r\n      transformClasses = \"-translate-y-full\";\r\n      break;\r\n    case \"bottom\":\r\n      transformClasses = \"translate-y-full\";\r\n      break;\r\n    case \"left\":\r\n      transformClasses = \"-translate-x-full\";\r\n      break;\r\n    case \"right\":\r\n      transformClasses = \"translate-x-full\";\r\n      break;\r\n    default:\r\n      transformClasses = \"\";\r\n  }\r\n\r\n  return cn(baseClasses, backgroundClasses, transformClasses);\r\n});\r\n\r\nconst imageContainerClass = computed(() => ({\r\n  // Reduced movement on mobile for better UX\r\n  \"translate-y-2 md:translate-y-5\": direction.value === \"top\",\r\n  \"-translate-y-2 md:-translate-y-5\": direction.value === \"bottom\",\r\n  \"translate-x-2 md:translate-x-5\": direction.value === \"left\",\r\n  \"-translate-x-2 md:-translate-x-5\": direction.value === \"right\",\r\n}));\r\n\r\nonMounted(() => {\r\n  detectMobile();\r\n  window.addEventListener(\"resize\", detectMobile);\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener(\"resize\", detectMobile);\r\n  if (touchTimer) {\r\n    clearTimeout(touchTimer);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter-from,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n/* Enhanced mobile touch targets */\r\n@media (max-width: 768px) {\r\n  .group\\/card {\r\n    min-height: 44px; /* iOS minimum touch target */\r\n    min-width: 44px;\r\n  }\r\n}\r\n\r\n/* Smooth transitions for mobile */\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    transition-duration: 0.1s !important;\r\n  }\r\n}\r\n</style>\r\n",
      "target": "uniapp"
    },
    {
      "path": "index.ts",
      "content": "export { default as DirectionAwareHover } from \"./DirectionAwareHover.vue\";\r\n"
    }
  ],
  "fileCount": 3,
  "contentHash": "80645db76f49b25b0b0a9d3159f543fc0cce5dc5"
}
