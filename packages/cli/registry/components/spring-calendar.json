{
  "name": "spring-calendar",
  "dependencies": [
    "motion-v"
  ],
  "files": [
    {
      "path": "index.ts",
      "content": "export { default as SpringCalendar } from \"./SpringCalendar.vue\";\r\nexport { default as TextMorph } from \"./TextMorph.vue\";\r\n"
    },
    {
      "path": "SpringCalendar.vue",
      "content": "<template>\r\n  <MotionConfig :transition=\"{ duration: 0.7, type: 'spring', bounce: 0.5 }\">\r\n    <Motion\r\n      layout\r\n      as=\"div\"\r\n      class=\"flex w-full max-w-lg flex-col gap-6 overflow-hidden rounded-3xl border bg-muted/50 p-8\"\r\n      :animate=\"{\r\n        height: calendarData[activeIndex].events ? 'auto' : 'fit',\r\n      }\"\r\n    >\r\n      <TextMorph\r\n        :text=\"calendarData[activeIndex].day\"\r\n        class=\"w-fit font-bold\"\r\n        :morph-time=\"0.5\"\r\n        :cool-down-time=\"0.1\"\r\n      />\r\n\r\n      <Motion\r\n        v-if=\"calendarData[activeIndex].events\"\r\n        :key=\"'event-container' + Math.random()\"\r\n        layout\r\n        as=\"div\"\r\n        class=\"flex flex-col gap-4\"\r\n        :initial=\"{ x: 10, opacity: 0 }\"\r\n        :animate=\"{ x: 0, opacity: 1 }\"\r\n      >\r\n        <Motion\r\n          as=\"div\"\r\n          class=\"flex items-center gap-2\"\r\n          layout\r\n          :initial=\"{ x: 10, opacity: 0 }\"\r\n          :animate=\"{ x: 0, opacity: 1 }\"\r\n        >\r\n          <Icon name=\"lucide:calendar\" />\r\n          <span class=\"font-medium\">Upcoming Events</span>\r\n        </Motion>\r\n\r\n        <div class=\"flex flex-wrap gap-4\">\r\n          <Motion\r\n            v-for=\"event in calendarData[activeIndex].events\"\r\n            :key=\"event.title + event.time + Math.random()\"\r\n            as=\"div\"\r\n            layout\r\n            class=\"w-full max-w-44 rounded-lg border p-3\"\r\n            :initial=\"{ x: 10, opacity: 0 }\"\r\n            :animate=\"{ x: 0, opacity: 1 }\"\r\n          >\r\n            <p class=\"text-sm font-medium\">{{ event.title }}</p>\r\n            <p class=\"text-xs text-muted-foreground\">{{ event.day }}, {{ event.time }}</p>\r\n          </Motion>\r\n        </div>\r\n      </Motion>\r\n\r\n      <div class=\"flex flex-wrap gap-3\">\r\n        <Motion\r\n          v-for=\"(day, index) in calendarData\"\r\n          :key=\"day.date + '-' + index\"\r\n          as=\"button\"\r\n          layout\r\n          class=\"flex flex-col rounded-2xl border border-border p-3 text-center opacity-100 duration-200 hover:bg-muted-foreground/10\"\r\n          :class=\"activeIndex === index ? 'bg-muted-foreground/5' : ''\"\r\n          :while-hover=\"{ scale: 1.1 }\"\r\n          :while-press=\"{ scale: 0.8 }\"\r\n          :transition=\"{ duration: 0.01 }\"\r\n          @click=\"setActive(index)\"\r\n        >\r\n          <span class=\"text-xs font-medium uppercase\">{{ day.month }}</span>\r\n          <span class=\"font-semibold\">{{ day.date }}</span>\r\n          <span class=\"text-xs font-medium uppercase text-primary duration-200\">\r\n            {{ day.day }}\r\n          </span>\r\n        </Motion>\r\n      </div>\r\n    </Motion>\r\n  </MotionConfig>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from \"vue\";\r\nimport { Motion, MotionConfig } from \"motion-v\";\r\n\r\ninterface CalendarEvent {\r\n  title: string;\r\n  day: string;\r\n  time: string;\r\n}\r\n\r\ninterface CalendarDay {\r\n  month: string;\r\n  date: number;\r\n  day: string;\r\n  events?: CalendarEvent[];\r\n}\r\n\r\nconst props = defineProps<{\r\n  calendarData: CalendarDay[];\r\n  initialIndex?: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  (e: \"update:activeIndex\", value: number): void;\r\n}>();\r\n\r\nconst activeIndex = ref(props.initialIndex ?? 0);\r\n\r\nfunction setActive(index: number) {\r\n  activeIndex.value = index;\r\n  emit(\"update:activeIndex\", index);\r\n}\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "SpringCalendar.vue",
      "content": "<template>\r\n  <MotionConfig :transition=\"{ duration: 0.7, type: 'spring', bounce: 0.5 }\">\r\n    <Motion\r\n      layout\r\n      as=\"div\"\r\n      class=\"flex w-full max-w-lg flex-col gap-6 overflow-hidden rounded-3xl border bg-muted/50 p-8\"\r\n      :animate=\"{\r\n        height: calendarData[activeIndex].events ? 'auto' : 'fit',\r\n      }\"\r\n    >\r\n      <TextMorph\r\n        :text=\"calendarData[activeIndex].day\"\r\n        class=\"w-fit font-bold\"\r\n        :morph-time=\"0.5\"\r\n        :cool-down-time=\"0.1\"\r\n      />\r\n\r\n      <Motion\r\n        v-if=\"calendarData[activeIndex].events\"\r\n        :key=\"'event-container' + Math.random()\"\r\n        layout\r\n        as=\"div\"\r\n        class=\"flex flex-col gap-4\"\r\n        :initial=\"{ x: 10, opacity: 0 }\"\r\n        :animate=\"{ x: 0, opacity: 1 }\"\r\n      >\r\n        <Motion\r\n          as=\"div\"\r\n          class=\"flex items-center gap-2\"\r\n          layout\r\n          :initial=\"{ x: 10, opacity: 0 }\"\r\n          :animate=\"{ x: 0, opacity: 1 }\"\r\n        >\r\n          <Icon name=\"lucide:calendar\" />\r\n          <text class=\"font-medium\">Upcoming Events</text>\r\n        </Motion>\r\n\r\n        <view class=\"flex flex-wrap gap-4\">\r\n          <Motion\r\n            v-for=\"event in calendarData[activeIndex].events\"\r\n            :key=\"event.title + event.time + Math.random()\"\r\n            as=\"div\"\r\n            layout\r\n            class=\"w-full max-w-44 rounded-lg border p-3\"\r\n            :initial=\"{ x: 10, opacity: 0 }\"\r\n            :animate=\"{ x: 0, opacity: 1 }\"\r\n          >\r\n            <p class=\"text-sm font-medium\">{{ event.title }}</p>\r\n            <p class=\"text-xs text-muted-foreground\">{{ event.day }}, {{ event.time }}</p>\r\n          </Motion>\r\n        </view>\r\n      </Motion>\r\n\r\n      <view class=\"flex flex-wrap gap-3\">\r\n        <Motion\r\n          v-for=\"(day, index) in calendarData\"\r\n          :key=\"day.date + '-' + index\"\r\n          as=\"button\"\r\n          layout\r\n          class=\"flex flex-col rounded-2xl border border-border p-3 text-center opacity-100 duration-200 hover:bg-muted-foreground/10\"\r\n          :class=\"activeIndex === index ? 'bg-muted-foreground/5' : ''\"\r\n          :while-hover=\"{ scale: 1.1 }\"\r\n          :while-press=\"{ scale: 0.8 }\"\r\n          :transition=\"{ duration: 0.01 }\"\r\n          @click=\"setActive(index)\"\r\n        >\r\n          <text class=\"text-xs font-medium uppercase\">{{ day.month }}</text>\r\n          <text class=\"font-semibold\">{{ day.date }}</text>\r\n          <text class=\"text-xs font-medium uppercase text-primary duration-200\">\r\n            {{ day.day }}\r\n          </text>\r\n        </Motion>\r\n      </view>\r\n    </Motion>\r\n  </MotionConfig>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from \"vue\";\r\nimport { Motion, MotionConfig } from \"motion-v\";\r\n\r\ninterface CalendarEvent {\r\n  title: string;\r\n  day: string;\r\n  time: string;\r\n}\r\n\r\ninterface CalendarDay {\r\n  month: string;\r\n  date: number;\r\n  day: string;\r\n  events?: CalendarEvent[];\r\n}\r\n\r\nconst props = defineProps<{\r\n  calendarData: CalendarDay[];\r\n  initialIndex?: number;\r\n}>();\r\n\r\nconst emit = defineEmits<{\r\n  (e: \"update:activeIndex\", value: number): void;\r\n}>();\r\n\r\nconst activeIndex = ref(props.initialIndex ?? 0);\r\n\r\nfunction setActive(index: number) {\r\n  activeIndex.value = index;\r\n  emit(\"update:activeIndex\", index);\r\n}\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "TextMorph.vue",
      "content": "<template>\r\n  <div\r\n    :class=\"\r\n      cn(\r\n        'relative h-16 w-full max-w-screen-md text-center font-sans text-[40pt] font-bold leading-none [filter:url(#threshold)_blur(0.6px)]',\r\n        props.class,\r\n      )\r\n    \"\r\n  >\r\n    <span\r\n      ref=\"text1Ref\"\r\n      :class=\"cn(TEXT_CLASSES)\"\r\n    />\r\n    <span\r\n      ref=\"text2Ref\"\r\n      :class=\"cn(TEXT_CLASSES)\"\r\n    />\r\n\r\n    <svg\r\n      id=\"filters\"\r\n      class=\"fixed size-0\"\r\n      preserveAspectRatio=\"xMidYMid slice\"\r\n    >\r\n      <defs>\r\n        <filter id=\"threshold\">\r\n          <feColorMatrix\r\n            in=\"SourceGraphic\"\r\n            type=\"matrix\"\r\n            values=\"1 0 0 0 0\r\n                    0 1 0 0 0\r\n                    0 0 1 0 0\r\n                    0 0 0 255 -140\"\r\n          />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, watch, onMounted, onUnmounted } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst TEXT_CLASSES = \"absolute inset-x-0 top-0 m-auto inline-block w-full\";\r\n\r\ninterface Props {\r\n  class?: string;\r\n  text: string;\r\n  morphTime?: number;\r\n  coolDownTime?: number;\r\n}\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  morphTime: 1.5,\r\n  coolDownTime: 0.5,\r\n});\r\n\r\nconst text1Ref = ref<HTMLSpanElement>();\r\nconst text2Ref = ref<HTMLSpanElement>();\r\n\r\nconst previousText = ref(props.text);\r\nconst currentText = ref(props.text);\r\nconst morph = ref(0);\r\nconst coolDown = ref(0);\r\nconst time = ref(new Date());\r\n\r\nconst isAnimating = ref(false);\r\n\r\nlet animationFrameId: number = 0;\r\n\r\nfunction setStyles(fraction: number) {\r\n  if (!text1Ref.value || !text2Ref.value) return;\r\n\r\n  text2Ref.value.textContent = currentText.value;\r\n  text1Ref.value.textContent = previousText.value;\r\n\r\n  text2Ref.value.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;\r\n  text2Ref.value.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;\r\n\r\n  const invertedFraction = 1 - fraction;\r\n  text1Ref.value.style.filter = `blur(${Math.min(8 / invertedFraction - 8, 100)}px)`;\r\n  text1Ref.value.style.opacity = `${Math.pow(invertedFraction, 0.4) * 100}%`;\r\n}\r\n\r\nfunction doMorph() {\r\n  morph.value -= coolDown.value;\r\n  coolDown.value = 0;\r\n\r\n  let fraction = morph.value / props.morphTime;\r\n\r\n  if (fraction > 1) {\r\n    coolDown.value = props.coolDownTime;\r\n    fraction = 1;\r\n  }\r\n\r\n  setStyles(fraction);\r\n\r\n  if (fraction === 1) {\r\n    previousText.value = currentText.value;\r\n  }\r\n}\r\n\r\nfunction doCoolDown() {\r\n  morph.value = 0;\r\n\r\n  if (text1Ref.value && text2Ref.value) {\r\n    text2Ref.value.style.filter = \"none\";\r\n    text2Ref.value.style.opacity = \"100%\";\r\n    text1Ref.value.style.filter = \"none\";\r\n    text1Ref.value.style.opacity = \"0%\";\r\n  }\r\n}\r\n\r\nfunction animate() {\r\n  animationFrameId = requestAnimationFrame(animate);\r\n\r\n  const newTime = new Date();\r\n  const dt = (newTime.getTime() - time.value.getTime()) / 1000;\r\n  time.value = newTime;\r\n\r\n  coolDown.value -= dt;\r\n\r\n  if (coolDown.value <= 0) {\r\n    doMorph();\r\n\r\n    // Stop if morphing is done\r\n    if (coolDown.value > 0) {\r\n      cancelAnimationFrame(animationFrameId);\r\n      isAnimating.value = false;\r\n    }\r\n  } else {\r\n    doCoolDown();\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => props.text,\r\n  (newText) => {\r\n    if (newText !== currentText.value) {\r\n      previousText.value = currentText.value;\r\n      currentText.value = newText;\r\n      morph.value = 0;\r\n      coolDown.value = 0;\r\n      time.value = new Date();\r\n\r\n      if (!isAnimating.value) {\r\n        isAnimating.value = true;\r\n        animate();\r\n      }\r\n    }\r\n  },\r\n);\r\n\r\nonMounted(() => {\r\n  animate();\r\n});\r\n\r\nonUnmounted(() => {\r\n  cancelAnimationFrame(animationFrameId);\r\n});\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "TextMorph.vue",
      "content": "<template>\r\n  <view\r\n    :class=\"\r\n      cn(\r\n        'relative h-16 w-full max-w-screen-md text-center font-sans text-[40pt] font-bold leading-none [filter:url(#threshold)_blur(0.6px)]',\r\n        props.class,\r\n      )\r\n    \"\r\n  >\r\n    <text\r\n      ref=\"text1Ref\"\r\n      :class=\"cn(TEXT_CLASSES)\"\r\n    />\r\n    <text\r\n      ref=\"text2Ref\"\r\n      :class=\"cn(TEXT_CLASSES)\"\r\n    />\r\n\r\n    <svg\r\n      id=\"filters\"\r\n      class=\"fixed size-0\"\r\n      preserveAspectRatio=\"xMidYMid slice\"\r\n    >\r\n      <defs>\r\n        <filter id=\"threshold\">\r\n          <feColorMatrix\r\n            in=\"SourceGraphic\"\r\n            type=\"matrix\"\r\n            values=\"1 0 0 0 0\r\n                    0 1 0 0 0\r\n                    0 0 1 0 0\r\n                    0 0 0 255 -140\"\r\n          />\r\n        </filter>\r\n      </defs>\r\n    </svg>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, watch, onMounted, onUnmounted } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst TEXT_CLASSES = \"absolute inset-x-0 top-0 m-auto inline-block w-full\";\r\n\r\ninterface Props {\r\n  class?: string;\r\n  text: string;\r\n  morphTime?: number;\r\n  coolDownTime?: number;\r\n}\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  morphTime: 1.5,\r\n  coolDownTime: 0.5,\r\n});\r\n\r\nconst text1Ref = ref<HTMLSpanElement>();\r\nconst text2Ref = ref<HTMLSpanElement>();\r\n\r\nconst previousText = ref(props.text);\r\nconst currentText = ref(props.text);\r\nconst morph = ref(0);\r\nconst coolDown = ref(0);\r\nconst time = ref(new Date());\r\n\r\nconst isAnimating = ref(false);\r\n\r\nlet animationFrameId: number = 0;\r\n\r\nfunction setStyles(fraction: number) {\r\n  if (!text1Ref.value || !text2Ref.value) return;\r\n\r\n  text2Ref.value.textContent = currentText.value;\r\n  text1Ref.value.textContent = previousText.value;\r\n\r\n  text2Ref.value.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;\r\n  text2Ref.value.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;\r\n\r\n  const invertedFraction = 1 - fraction;\r\n  text1Ref.value.style.filter = `blur(${Math.min(8 / invertedFraction - 8, 100)}px)`;\r\n  text1Ref.value.style.opacity = `${Math.pow(invertedFraction, 0.4) * 100}%`;\r\n}\r\n\r\nfunction doMorph() {\r\n  morph.value -= coolDown.value;\r\n  coolDown.value = 0;\r\n\r\n  let fraction = morph.value / props.morphTime;\r\n\r\n  if (fraction > 1) {\r\n    coolDown.value = props.coolDownTime;\r\n    fraction = 1;\r\n  }\r\n\r\n  setStyles(fraction);\r\n\r\n  if (fraction === 1) {\r\n    previousText.value = currentText.value;\r\n  }\r\n}\r\n\r\nfunction doCoolDown() {\r\n  morph.value = 0;\r\n\r\n  if (text1Ref.value && text2Ref.value) {\r\n    text2Ref.value.style.filter = \"none\";\r\n    text2Ref.value.style.opacity = \"100%\";\r\n    text1Ref.value.style.filter = \"none\";\r\n    text1Ref.value.style.opacity = \"0%\";\r\n  }\r\n}\r\n\r\nfunction animate() {\r\n  animationFrameId = requestAnimationFrame(animate);\r\n\r\n  const newTime = new Date();\r\n  const dt = (newTime.getTime() - time.value.getTime()) / 1000;\r\n  time.value = newTime;\r\n\r\n  coolDown.value -= dt;\r\n\r\n  if (coolDown.value <= 0) {\r\n    doMorph();\r\n\r\n    // Stop if morphing is done\r\n    if (coolDown.value > 0) {\r\n      cancelAnimationFrame(animationFrameId);\r\n      isAnimating.value = false;\r\n    }\r\n  } else {\r\n    doCoolDown();\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => props.text,\r\n  (newText) => {\r\n    if (newText !== currentText.value) {\r\n      previousText.value = currentText.value;\r\n      currentText.value = newText;\r\n      morph.value = 0;\r\n      coolDown.value = 0;\r\n      time.value = new Date();\r\n\r\n      if (!isAnimating.value) {\r\n        isAnimating.value = true;\r\n        animate();\r\n      }\r\n    }\r\n  },\r\n);\r\n\r\nonMounted(() => {\r\n  animate();\r\n});\r\n\r\nonUnmounted(() => {\r\n  cancelAnimationFrame(animationFrameId);\r\n});\r\n</script>\r\n",
      "target": "uniapp"
    }
  ],
  "fileCount": 5,
  "contentHash": "391122e17fba38a72e649abd3ea0c22b6dae4ef2"
}
