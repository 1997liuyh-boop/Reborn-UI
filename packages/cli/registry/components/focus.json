{
  "name": "focus",
  "dependencies": [],
  "files": [
    {
      "path": "Focus.vue",
      "content": "<template>\r\n  <div\r\n    ref=\"containerRef\"\r\n    class=\"focus-container\"\r\n  >\r\n    <span\r\n      v-for=\"(word, index) in words\"\r\n      :key=\"`${word}_${index}`\"\r\n      :ref=\"(el) => setRef(el as HTMLSpanElement, index)\"\r\n      class=\"focus-word\"\r\n      :class=\"{\r\n        manual: props.manualMode,\r\n        active: index === currentIndex && !props.manualMode,\r\n      }\"\r\n      :style=\"{\r\n        filter: manualMode\r\n          ? index === currentIndex\r\n            ? `blur(0px)`\r\n            : `blur(${blurAmount}px)`\r\n          : index === currentIndex\r\n            ? `blur(0px)`\r\n            : `blur(${blurAmount}px)`,\r\n        transition: `filter ${animationDuration}s ease`,\r\n        '--border-color': borderColor,\r\n      }\"\r\n      @mouseenter=\"handleMouseEnter(index)\"\r\n      @mouseleave=\"handleMouseLeave\"\r\n    >\r\n      {{ word }}\r\n    </span>\r\n    <Motion\r\n      as=\"div\"\r\n      class=\"focus-frame\"\r\n      :animate=\"{\r\n        x: focusRect.x,\r\n        y: focusRect.y,\r\n        width: focusRect.width,\r\n        height: focusRect.height,\r\n        opacity: currentIndex >= 0 ? 1 : 0,\r\n      }\"\r\n      :transition=\"{\r\n        duration: animationDuration,\r\n      }\"\r\n      :style=\"{\r\n        '--border-color': borderColor,\r\n      }\"\r\n    >\r\n      <span class=\"corner top-left\" />\r\n      <span class=\"corner top-right\" />\r\n      <span class=\"corner bottom-left\" />\r\n      <span class=\"corner bottom-right\" />\r\n    </Motion>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\ninterface FocusProps {\r\n  sentence?: string;\r\n  manualMode?: boolean;\r\n  blurAmount?: number;\r\n  borderColor?: string;\r\n  animationDuration?: number;\r\n  pauseBetweenAnimations?: number;\r\n}\r\n\r\ninterface FocusRect {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst props = withDefaults(defineProps<FocusProps>(), {\r\n  sentence: \"Inspira Focus\",\r\n  manualMode: false,\r\n  blurAmount: 5,\r\n  borderColor: \"green\",\r\n  animationDuration: 0.5,\r\n  pauseBetweenAnimations: 1,\r\n});\r\n\r\nconst words = computed(() => props.sentence.split(\" \"));\r\nconst containerRef = ref<HTMLElement | null>(null);\r\nconst wordRefs = ref<{ [key: number]: HTMLElement | null }>({});\r\nconst currentIndex = ref(0);\r\nconst lastActiveIndex = ref<number | null>(null);\r\nconst focusRect = ref<FocusRect>({ x: 0, y: 0, width: 0, height: 0 });\r\n\r\nfunction setRef(el: HTMLElement, index: number) {\r\n  if (!el) return;\r\n  wordRefs.value[index] = el;\r\n}\r\n\r\nfunction handleMouseEnter(index: number) {\r\n  if (props.manualMode) {\r\n    lastActiveIndex.value = index;\r\n    currentIndex.value = index;\r\n  }\r\n}\r\nfunction handleMouseLeave() {\r\n  if (props.manualMode) {\r\n    currentIndex.value = 0;\r\n  }\r\n}\r\n\r\nwatch(\r\n  currentIndex,\r\n  async (newIndex) => {\r\n    await nextTick();\r\n    if (newIndex === null || newIndex === -1) return;\r\n    if (!wordRefs.value[newIndex] || !containerRef.value) return;\r\n\r\n    const parentRect = containerRef.value.getBoundingClientRect();\r\n    const wordRect = wordRefs.value[newIndex].getBoundingClientRect();\r\n\r\n    focusRect.value = {\r\n      x: wordRect.left - parentRect.left,\r\n      y: wordRect.top - parentRect.top,\r\n      width: wordRect.width,\r\n      height: wordRect.height,\r\n    };\r\n  },\r\n  { immediate: true },\r\n);\r\n\r\nonMounted(() => {\r\n  if (!props.manualMode) {\r\n    useIntervalFn(\r\n      () => {\r\n        currentIndex.value = (currentIndex.value + 1) % words.value.length;\r\n      },\r\n      props.animationDuration * 1000 + props.pauseBetweenAnimations * 1000,\r\n      {\r\n        immediate: true,\r\n      },\r\n    );\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.focus-container {\r\n  position: relative;\r\n  display: flex;\r\n  gap: 1em;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* Words */\r\n.focus-word {\r\n  position: relative;\r\n  font-size: 3rem;\r\n  font-weight: 900;\r\n  cursor: pointer;\r\n  transition:\r\n    filter 0.3s ease,\r\n    color 0.3s ease;\r\n}\r\n\r\n.focus-word.active {\r\n  filter: blur(0);\r\n}\r\n\r\n.focus-frame {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  box-sizing: content-box;\r\n  border: none;\r\n}\r\n\r\n.corner {\r\n  position: absolute;\r\n  width: 1rem;\r\n  height: 1rem;\r\n  border: 3px solid var(--border-color, #fff);\r\n  filter: drop-shadow(0px 0px 4px var(--border-color, #fff));\r\n  border-radius: 3px;\r\n  transition: none;\r\n}\r\n\r\n.top-left {\r\n  top: -10px;\r\n  left: -10px;\r\n  border-right: none;\r\n  border-bottom: none;\r\n}\r\n\r\n.top-right {\r\n  top: -10px;\r\n  right: -10px;\r\n  border-left: none;\r\n  border-bottom: none;\r\n}\r\n\r\n.bottom-left {\r\n  bottom: -10px;\r\n  left: -10px;\r\n  border-right: none;\r\n  border-top: none;\r\n}\r\n\r\n.bottom-right {\r\n  bottom: -10px;\r\n  right: -10px;\r\n  border-left: none;\r\n  border-top: none;\r\n}\r\n</style>\r\n",
      "target": "web"
    },
    {
      "path": "Focus.vue",
      "content": "<template>\r\n  <view\r\n    ref=\"containerRef\"\r\n    class=\"focus-container\"\r\n  >\r\n    <text\r\n      v-for=\"(word, index) in words\"\r\n      :key=\"`${word}_${index}`\"\r\n      :ref=\"(el) => setRef(el as HTMLSpanElement, index)\"\r\n      class=\"focus-word\"\r\n      :class=\"{\r\n        manual: props.manualMode,\r\n        active: index === currentIndex && !props.manualMode,\r\n      }\"\r\n      :style=\"{\r\n        filter: manualMode\r\n          ? index === currentIndex\r\n            ? `blur(0px)`\r\n            : `blur(${blurAmount}px)`\r\n          : index === currentIndex\r\n            ? `blur(0px)`\r\n            : `blur(${blurAmount}px)`,\r\n        transition: `filter ${animationDuration}s ease`,\r\n        '--border-color': borderColor,\r\n      }\"\r\n      @mouseenter=\"handleMouseEnter(index)\"\r\n      @mouseleave=\"handleMouseLeave\"\r\n    >\r\n      {{ word }}\r\n    </text>\r\n    <Motion\r\n      as=\"div\"\r\n      class=\"focus-frame\"\r\n      :animate=\"{\r\n        x: focusRect.x,\r\n        y: focusRect.y,\r\n        width: focusRect.width,\r\n        height: focusRect.height,\r\n        opacity: currentIndex >= 0 ? 1 : 0,\r\n      }\"\r\n      :transition=\"{\r\n        duration: animationDuration,\r\n      }\"\r\n      :style=\"{\r\n        '--border-color': borderColor,\r\n      }\"\r\n    >\r\n      <text class=\"corner top-left\" />\r\n      <text class=\"corner top-right\" />\r\n      <text class=\"corner bottom-left\" />\r\n      <text class=\"corner bottom-right\" />\r\n    </Motion>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\ninterface FocusProps {\r\n  sentence?: string;\r\n  manualMode?: boolean;\r\n  blurAmount?: number;\r\n  borderColor?: string;\r\n  animationDuration?: number;\r\n  pauseBetweenAnimations?: number;\r\n}\r\n\r\ninterface FocusRect {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst props = withDefaults(defineProps<FocusProps>(), {\r\n  sentence: \"Inspira Focus\",\r\n  manualMode: false,\r\n  blurAmount: 5,\r\n  borderColor: \"green\",\r\n  animationDuration: 0.5,\r\n  pauseBetweenAnimations: 1,\r\n});\r\n\r\nconst words = computed(() => props.sentence.split(\" \"));\r\nconst containerRef = ref<HTMLElement | null>(null);\r\nconst wordRefs = ref<{ [key: number]: HTMLElement | null }>({});\r\nconst currentIndex = ref(0);\r\nconst lastActiveIndex = ref<number | null>(null);\r\nconst focusRect = ref<FocusRect>({ x: 0, y: 0, width: 0, height: 0 });\r\n\r\nfunction setRef(el: HTMLElement, index: number) {\r\n  if (!el) return;\r\n  wordRefs.value[index] = el;\r\n}\r\n\r\nfunction handleMouseEnter(index: number) {\r\n  if (props.manualMode) {\r\n    lastActiveIndex.value = index;\r\n    currentIndex.value = index;\r\n  }\r\n}\r\nfunction handleMouseLeave() {\r\n  if (props.manualMode) {\r\n    currentIndex.value = 0;\r\n  }\r\n}\r\n\r\nwatch(\r\n  currentIndex,\r\n  async (newIndex) => {\r\n    await nextTick();\r\n    if (newIndex === null || newIndex === -1) return;\r\n    if (!wordRefs.value[newIndex] || !containerRef.value) return;\r\n\r\n    const parentRect = containerRef.value.getBoundingClientRect();\r\n    const wordRect = wordRefs.value[newIndex].getBoundingClientRect();\r\n\r\n    focusRect.value = {\r\n      x: wordRect.left - parentRect.left,\r\n      y: wordRect.top - parentRect.top,\r\n      width: wordRect.width,\r\n      height: wordRect.height,\r\n    };\r\n  },\r\n  { immediate: true },\r\n);\r\n\r\nonMounted(() => {\r\n  if (!props.manualMode) {\r\n    useIntervalFn(\r\n      () => {\r\n        currentIndex.value = (currentIndex.value + 1) % words.value.length;\r\n      },\r\n      props.animationDuration * 1000 + props.pauseBetweenAnimations * 1000,\r\n      {\r\n        immediate: true,\r\n      },\r\n    );\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.focus-container {\r\n  position: relative;\r\n  display: flex;\r\n  gap: 1em;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* Words */\r\n.focus-word {\r\n  position: relative;\r\n  font-size: 3rem;\r\n  font-weight: 900;\r\n  cursor: pointer;\r\n  transition:\r\n    filter 0.3s ease,\r\n    color 0.3s ease;\r\n}\r\n\r\n.focus-word.active {\r\n  filter: blur(0);\r\n}\r\n\r\n.focus-frame {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  box-sizing: content-box;\r\n  border: none;\r\n}\r\n\r\n.corner {\r\n  position: absolute;\r\n  width: 1rem;\r\n  height: 1rem;\r\n  border: 3px solid var(--border-color, #fff);\r\n  filter: drop-shadow(0px 0px 4px var(--border-color, #fff));\r\n  border-radius: 3px;\r\n  transition: none;\r\n}\r\n\r\n.top-left {\r\n  top: -10px;\r\n  left: -10px;\r\n  border-right: none;\r\n  border-bottom: none;\r\n}\r\n\r\n.top-right {\r\n  top: -10px;\r\n  right: -10px;\r\n  border-left: none;\r\n  border-bottom: none;\r\n}\r\n\r\n.bottom-left {\r\n  bottom: -10px;\r\n  left: -10px;\r\n  border-right: none;\r\n  border-top: none;\r\n}\r\n\r\n.bottom-right {\r\n  bottom: -10px;\r\n  right: -10px;\r\n  border-left: none;\r\n  border-top: none;\r\n}\r\n</style>\r\n",
      "target": "uniapp"
    },
    {
      "path": "index.ts",
      "content": "export { default as Focus } from \"./Focus.vue\";\r\n"
    }
  ],
  "fileCount": 3,
  "contentHash": "733154b2a7a93d2118a1343328ba6a25bcce4750"
}
