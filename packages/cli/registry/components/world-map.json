{
  "name": "world-map",
  "dependencies": [
    "dotted-map",
    "motion-v"
  ],
  "files": [
    {
      "path": "index.ts",
      "content": "export { default as WorldMap } from \"./WorldMap.vue\";\r\n"
    },
    {
      "path": "WorldMap.vue",
      "content": "<template>\r\n  <div class=\"relative aspect-[2/1] w-full rounded-lg bg-white font-sans dark:bg-black\">\r\n    <NuxtImg\r\n      :src=\"`data:image/svg+xml;utf8,${encodeURIComponent(svgMap)}`\"\r\n      class=\"pointer-events-none size-full select-none [mask-image:linear-gradient(to_bottom,transparent,white_10%,white_90%,transparent)]\"\r\n      alt=\"world map\"\r\n      height=\"495\"\r\n      width=\"1056\"\r\n      :draggable=\"false\"\r\n    />\r\n    <svg\r\n      ref=\"svgRef\"\r\n      view-box=\"0 0 800 400\"\r\n      class=\"pointer-events-none absolute inset-0 size-full select-none\"\r\n    >\r\n      <g\r\n        v-for=\"(dot, i) in props.dots\"\r\n        :key=\"`path-group-${i}`\"\r\n      >\r\n        <Motion\r\n          :key=\"`start-upper-${i}`\"\r\n          as=\"path\"\r\n          :d=\"createCurvedPath(dot)\"\r\n          fill=\"none\"\r\n          stroke=\"url(#path-gradient)\"\r\n          stroke-width=\"1\"\r\n          :initial=\"{\r\n            pathLength: 0,\r\n          }\"\r\n          :animate=\"{\r\n            pathLength: 1,\r\n          }\"\r\n          :transition=\"{\r\n            duration: 1,\r\n            delay: 0.5 * i,\r\n            ease: 'easeOut',\r\n          }\"\r\n        ></Motion>\r\n      </g>\r\n\r\n      <defs>\r\n        <linearGradient\r\n          id=\"path-gradient\"\r\n          x1=\"0%\"\r\n          y1=\"0%\"\r\n          x2=\"100%\"\r\n          y2=\"0%\"\r\n        >\r\n          <stop\r\n            offset=\"0%\"\r\n            stop-color=\"white\"\r\n            stop-opacity=\"0\"\r\n          />\r\n          <stop\r\n            offset=\"5%\"\r\n            :stop-color=\"lineColor\"\r\n            stop-opacity=\"1\"\r\n          />\r\n          <stop\r\n            offset=\"95%\"\r\n            :stop-color=\"lineColor\"\r\n            stop-opacity=\"1\"\r\n          />\r\n          <stop\r\n            offset=\"100%\"\r\n            stop-color=\"white\"\r\n            stop-opacity=\"0\"\r\n          />\r\n        </linearGradient>\r\n      </defs>\r\n\r\n      <g\r\n        v-for=\"(dot, i) in props.dots\"\r\n        :key=\"`points-group-${i}`\"\r\n      >\r\n        <g :key=\"`start-${i}`\">\r\n          <circle\r\n            :cx=\"projectPoint(dot.start.lat, dot.start.lng).x\"\r\n            :cy=\"projectPoint(dot.start.lat, dot.start.lng).y\"\r\n            r=\"2\"\r\n            :fill=\"props.lineColor\"\r\n          />\r\n          <circle\r\n            :cx=\"projectPoint(dot.start.lat, dot.start.lng).x\"\r\n            :cy=\"projectPoint(dot.start.lat, dot.start.lng).y\"\r\n            r=\"2\"\r\n            :fill=\"props.lineColor\"\r\n            opacity=\"0.5\"\r\n          >\r\n            <animate\r\n              attribute-name=\"r\"\r\n              from=\"2\"\r\n              to=\"8\"\r\n              dur=\"1.5s\"\r\n              begin=\"0s\"\r\n              repeat-count=\"indefinite\"\r\n            />\r\n            <animate\r\n              attribute-name=\"opacity\"\r\n              from=\"0.5\"\r\n              to=\"0\"\r\n              dur=\"1.5s\"\r\n              begin=\"0s\"\r\n              repeat-count=\"indefinite\"\r\n            />\r\n          </circle>\r\n        </g>\r\n        <g :key=\"`end-${i}`\">\r\n          <circle\r\n            :cx=\"projectPoint(dot.end.lat, dot.end.lng).x\"\r\n            :cy=\"projectPoint(dot.end.lat, dot.end.lng).y\"\r\n            r=\"2\"\r\n            :fill=\"props.lineColor\"\r\n          />\r\n          <circle\r\n            :cx=\"projectPoint(dot.end.lat, dot.end.lng).x\"\r\n            :cy=\"projectPoint(dot.end.lat, dot.end.lng).y\"\r\n            r=\"2\"\r\n            :fill=\"props.lineColor\"\r\n            opacity=\"0.5\"\r\n          >\r\n            <animate\r\n              attribute-name=\"r\"\r\n              from=\"2\"\r\n              to=\"8\"\r\n              dur=\"1.5s\"\r\n              begin=\"0s\"\r\n              repeat-count=\"indefinite\"\r\n            />\r\n            <animate\r\n              attribute-name=\"opacity\"\r\n              from=\"0.5\"\r\n              to=\"0\"\r\n              dur=\"1.5s\"\r\n              begin=\"0s\"\r\n              repeat-count=\"indefinite\"\r\n            />\r\n          </circle>\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport DottedMap from \"dotted-map\";\r\nimport { Motion } from \"motion-v\";\r\n\r\ninterface Dot {\r\n  start: { lat: number; lng: number; label?: string };\r\n  end: { lat: number; lng: number; label?: string };\r\n}\r\ninterface Props {\r\n  dots?: Array<Dot>;\r\n  class?: string;\r\n  lineColor?: string;\r\n  mapColor: string;\r\n  mapBgColor: string;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  dots: () => [],\r\n  lineColor: \"#0EA5E9\",\r\n});\r\n\r\nconst map = new DottedMap({ height: 100, grid: \"diagonal\" });\r\n\r\nconst svgMap = computed(() =>\r\n  map.getSVG({\r\n    radius: 0.22,\r\n    color: props.mapColor,\r\n    shape: \"circle\",\r\n    backgroundColor: props.mapBgColor,\r\n  }),\r\n);\r\n\r\nfunction projectPoint(lat: number, lng: number) {\r\n  const x = (lng + 180) * (800 / 360);\r\n  const y = (90 - lat) * (400 / 180);\r\n  return { x, y };\r\n}\r\n\r\nfunction createCurvedPath(dot: Dot) {\r\n  const start = projectPoint(dot.start.lat, dot.start.lng);\r\n  const end = projectPoint(dot.end.lat, dot.end.lng);\r\n  const midX = (start.x + end.x) / 2;\r\n  const midY = Math.min(start.y, end.y) - 50;\r\n  return `M ${start.x} ${start.y} Q ${midX} ${midY} ${end.x} ${end.y}`;\r\n}\r\n</script>\r\n"
    }
  ],
  "fileCount": 2,
  "contentHash": "a4ed6d5eb3ba61dd368b61696f43fb5c878a56d6"
}
