{
  "name": "color-picker",
  "dependencies": [
    "@uiw/color-convert"
  ],
  "files": [
    {
      "path": "ColorPicker.vue",
      "content": "<template>\r\n  <div class=\"relative\">\r\n    <div @click=\"isOpen = !isOpen\">\r\n      <slot />\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"isOpen\"\r\n      class=\"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-80 p-4 bg-popover border rounded-md shadow-md z-50\"\r\n    >\r\n      <div class=\"space-y-4\">\r\n        <div\r\n          ref=\"saturationRef\"\r\n          class=\"relative w-full aspect-[4/2] rounded border cursor-crosshair\"\r\n          :style=\"{\r\n            background: `linear-gradient(to right, #fff, hsl(${colorHsv.h}, 100%, 50%)), linear-gradient(to top, #000, transparent)`,\r\n          }\"\r\n          @mousedown=\"startSaturationDrag\"\r\n          @touchstart=\"startSaturationDrag\"\r\n        >\r\n          <div\r\n            class=\"absolute w-4 h-4 border-2 border-white rounded-full pointer-events-none\"\r\n            :style=\"{\r\n              left: `${colorHsv.s}%`,\r\n              top: `${100 - colorHsv.v}%`,\r\n              transform: 'translate(-50%, -50%)',\r\n            }\"\r\n          />\r\n        </div>\r\n\r\n        <div\r\n          ref=\"hueRef\"\r\n          class=\"relative w-full h-4 rounded cursor-pointer\"\r\n          :style=\"{\r\n            background:\r\n              'linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)',\r\n          }\"\r\n          @mousedown=\"startHueDrag\"\r\n          @touchstart=\"startHueDrag\"\r\n          @click=\"handleHueClick\"\r\n        >\r\n          <div\r\n            class=\"absolute w-4 h-4 border-2 border-foreground rounded-full pointer-events-none bg-white\"\r\n            :style=\"{\r\n              left: `${(colorHsv.h / 360) * 100}%`,\r\n              transform: 'translate(-50%, -50%)',\r\n              top: '50%',\r\n            }\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"flex items-center gap-2\">\r\n          <div class=\"relative\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"inline-flex h-8 w-20 gap-2 items-center justify-between rounded-md border border-input bg-background px-2 py-1 text-xs font-medium uppercase\"\r\n              @click=\"toggleDropdown\"\r\n            >\r\n              <span>{{ colorType }}</span>\r\n              <Icon\r\n                name=\"lucide:chevron-down\"\r\n                :size=\"14\"\r\n              />\r\n            </button>\r\n\r\n            <div\r\n              v-if=\"isDropdownOpen\"\r\n              class=\"absolute top-full left-0 z-50 mt-1 w-full rounded-md border border-input bg-popover shadow-md\"\r\n            >\r\n              <div class=\"p-1\">\r\n                <button\r\n                  v-for=\"option in colorOptions\"\r\n                  :key=\"option.value\"\r\n                  type=\"button\"\r\n                  class=\"relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs font-medium uppercase hover:bg-accent hover:text-accent-foreground\"\r\n                  @click=\"selectColorType(option.value)\"\r\n                >\r\n                  {{ option.label }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"flex grow\">\r\n            <input\r\n              v-if=\"colorType === 'hex'\"\r\n              :value=\"hexValue\"\r\n              type=\"text\"\r\n              class=\"flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm placeholder:text-muted-foreground focus:outline-none\"\r\n              placeholder=\"#000000\"\r\n              @input=\"updateFromHex(($event.target as HTMLInputElement).value)\"\r\n            />\r\n\r\n            <ObjectColorInput\r\n              v-else\r\n              :value=\"colorType === 'hsl' || colorType === 'hsla' ? hslValue : rgbValue\"\r\n              :label=\"colorType\"\r\n              @value-change=\"updateFromObject\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          v-if=\"colorType === 'rgba' || colorType === 'hsla'\"\r\n          class=\"space-y-2\"\r\n        >\r\n          <div\r\n            ref=\"alphaRef\"\r\n            class=\"relative w-full h-4 rounded cursor-pointer\"\r\n            :style=\"{\r\n              background: `linear-gradient(to right, rgba(${rgbValue.r}, ${rgbValue.g}, ${rgbValue.b}, 0) 0%, rgba(${rgbValue.r}, ${rgbValue.g}, ${rgbValue.b}, 1) 100%), repeating-conic-gradient(#ccc 0% 25%, transparent 0% 50%) 50% / 8px 8px`,\r\n            }\"\r\n            @mousedown=\"startAlphaDrag\"\r\n            @touchstart=\"startAlphaDrag\"\r\n          >\r\n            <div\r\n              class=\"absolute w-4 h-4 border-2 border-foreground rounded-full pointer-events-none bg-white\"\r\n              :style=\"{\r\n                left: `${colorHsv.a * 100}%`,\r\n                transform: 'translate(-50%, -50%)',\r\n                top: '50%',\r\n              }\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"swatches.length > 0 || !hideDefaultSwatches\">\r\n          <div class=\"h-px bg-border\" />\r\n          <div\r\n            v-if=\"!hideDefaultSwatches\"\r\n            class=\"flex flex-wrap justify-start gap-2 pt-2\"\r\n          >\r\n            <button\r\n              v-for=\"color in sortedSwatches\"\r\n              :key=\"`${color}-swatch`\"\r\n              type=\"button\"\r\n              class=\"size-5 cursor-pointer rounded ring-2 ring-transparent ring-offset-1 ring-offset-background transition-all duration-100 hover:ring-current\"\r\n              :style=\"{ backgroundColor: color }\"\r\n              :aria-label=\"`Set color to ${color}`\"\r\n              @click=\"setColorFromHex(color)\"\r\n              @keydown.enter=\"setColorFromHex(color)\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"!hideContrastRatio\">\r\n          <div class=\"h-px bg-border\" />\r\n          <ContrastRatio :color=\"colorHsv\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"isOpen\"\r\n      class=\"fixed inset-0 z-40\"\r\n      @click=\"isOpen = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch } from \"vue\";\r\nimport {\r\n  type HexColor,\r\n  hexToHsva,\r\n  type HslaColor,\r\n  hslaToHsva,\r\n  type HsvaColor,\r\n  hsvaToHex,\r\n  hsvaToHsla,\r\n  hsvaToRgba,\r\n  type RgbaColor,\r\n  rgbaToHsva,\r\n} from \"@uiw/color-convert\";\r\nimport ObjectColorInput from \"./ObjectColorInput.vue\";\r\nimport ContrastRatio from \"./ContrastRatio.vue\";\r\n\r\nexport interface ColorPickerValue {\r\n  hex: string;\r\n  hsl: HslaColor;\r\n  hsla: HslaColor;\r\n  rgb: RgbaColor;\r\n  rgba: RgbaColor;\r\n}\r\n\r\nexport interface ColorPickerProps {\r\n  value?: `#${string}` | HsvaColor | HslaColor | RgbaColor;\r\n  type?: \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\" | \"hex\";\r\n  swatches?: HexColor[];\r\n  hideContrastRatio?: boolean;\r\n  hideDefaultSwatches?: boolean;\r\n  class?: string;\r\n  open?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<ColorPickerProps>(), {\r\n  type: \"hsl\",\r\n  swatches: () => [],\r\n  hideContrastRatio: false,\r\n  hideDefaultSwatches: false,\r\n  open: false,\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  \"value-change\": [value: ColorPickerValue];\r\n  \"update:open\": [value: boolean];\r\n}>();\r\n\r\nconst colorType = ref(props.type);\r\nconst isDropdownOpen = ref(false);\r\nconst isOpen = ref(props.open);\r\n\r\nconst colorOptions = [\r\n  { value: \"hex\", label: \"HEX\" },\r\n  { value: \"hsl\", label: \"HSL\" },\r\n  { value: \"hsla\", label: \"HSLA\" },\r\n  { value: \"rgb\", label: \"RGB\" },\r\n  { value: \"rgba\", label: \"RGBA\" },\r\n];\r\n\r\nfunction getColorAsHsva(color: ColorPickerProps[\"value\"]): HsvaColor {\r\n  if (!color) return { h: 0, s: 0, v: 0, a: 1 };\r\n\r\n  if (typeof color === \"string\") {\r\n    return hexToHsva(color);\r\n  } else if (\"h\" in color && \"s\" in color && \"v\" in color) {\r\n    return color;\r\n  } else if (\"r\" in color) {\r\n    return rgbaToHsva(color);\r\n  } else {\r\n    return hslaToHsva(color);\r\n  }\r\n}\r\n\r\nconst colorHsv = ref<HsvaColor>(getColorAsHsva(props.value));\r\n\r\nwatch(\r\n  () => props.value,\r\n  (newValue) => {\r\n    if (newValue) {\r\n      colorHsv.value = getColorAsHsva(newValue);\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\nwatch(\r\n  () => props.open,\r\n  (newValue) => {\r\n    isOpen.value = newValue;\r\n  },\r\n);\r\n\r\nwatch(isOpen, (newValue) => {\r\n  emit(\"update:open\", newValue);\r\n});\r\n\r\nconst hexValue = computed(() => hsvaToHex(colorHsv.value));\r\nconst hslValue = computed(() => hsvaToHsla(colorHsv.value));\r\nconst rgbValue = computed(() => hsvaToRgba(colorHsv.value));\r\n\r\nconst defaultSwatches = [\"#F8371A\", \"#F97C1B\", \"#FAC81C\", \"#3FD0B6\", \"#2CADF6\", \"#6462FC\"];\r\nconst sortedSwatches = computed(() => {\r\n  const allSwatches = [...defaultSwatches, ...props.swatches];\r\n  return allSwatches.sort((a, b) => hexToHsva(a).h - hexToHsva(b).h);\r\n});\r\n\r\nconst isDraggingSaturation = ref(false);\r\nconst isDraggingHue = ref(false);\r\nconst isDraggingAlpha = ref(false);\r\nconst saturationRef = ref<HTMLElement>();\r\nconst hueRef = ref<HTMLElement>();\r\nconst alphaRef = ref<HTMLElement>();\r\n\r\nfunction handleValueChange(color: HsvaColor) {\r\n  colorHsv.value = color;\r\n\r\n  const hslColor = hsvaToHsla(color);\r\n  const rgbColor = hsvaToRgba(color);\r\n\r\n  emit(\"value-change\", {\r\n    hex: hsvaToHex(color),\r\n    hsl: {\r\n      ...hslColor,\r\n      a: Math.round(hslColor.a * 100) / 100,\r\n    },\r\n    hsla: {\r\n      ...hslColor,\r\n      a: Math.round(hslColor.a * 100) / 100,\r\n    },\r\n    rgb: {\r\n      ...rgbColor,\r\n      a: Math.round(rgbColor.a * 100) / 100,\r\n    },\r\n    rgba: {\r\n      ...rgbColor,\r\n      a: Math.round(rgbColor.a * 100) / 100,\r\n    },\r\n  });\r\n}\r\n\r\nfunction updateFromHex(value: string | number) {\r\n  try {\r\n    const newColor = hexToHsva(String(value));\r\n    handleValueChange(newColor);\r\n  } catch (error) {\r\n    // Invalid hex color, ignore\r\n  }\r\n}\r\n\r\nfunction updateFromObject(value: HslaColor | RgbaColor) {\r\n  try {\r\n    const newColor = \"r\" in value ? rgbaToHsva(value) : hslaToHsva(value);\r\n    handleValueChange(newColor);\r\n  } catch (error) {\r\n    // Invalid color object, ignore\r\n  }\r\n}\r\n\r\nfunction setColorFromHex(hex: string) {\r\n  handleValueChange(hexToHsva(hex));\r\n}\r\n\r\nfunction toggleDropdown() {\r\n  isDropdownOpen.value = !isDropdownOpen.value;\r\n}\r\n\r\nfunction selectColorType(value: string) {\r\n  colorType.value = value as \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\" | \"hex\";\r\n  isDropdownOpen.value = false;\r\n}\r\n\r\nfunction startSaturationDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingSaturation.value = true;\r\n  updateSaturation(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingSaturation.value) {\r\n      updateSaturation(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingSaturation.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateSaturation(event: MouseEvent | TouchEvent) {\r\n  if (!saturationRef.value) return;\r\n\r\n  const rect = saturationRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n  const clientY = \"touches\" in event ? event.touches[0].clientY : event.clientY;\r\n\r\n  const relativeX = (clientX - rect.left) / rect.width;\r\n  const relativeY = (clientY - rect.top) / rect.height;\r\n\r\n  const x = Math.max(0.01, Math.min(0.99, relativeX));\r\n  const y = Math.max(0.01, Math.min(0.99, relativeY));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    s: x * 100,\r\n    v: (1 - y) * 100,\r\n  });\r\n}\r\n\r\nfunction handleHueClick(event: MouseEvent) {\r\n  updateHue(event);\r\n}\r\n\r\nfunction startHueDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingHue.value = true;\r\n  updateHue(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingHue.value) {\r\n      updateHue(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingHue.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateHue(event: MouseEvent | TouchEvent) {\r\n  if (!hueRef.value) return;\r\n\r\n  const rect = hueRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n\r\n  const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    h: x * 360,\r\n  });\r\n}\r\n\r\nfunction startAlphaDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingAlpha.value = true;\r\n  updateAlpha(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingAlpha.value) {\r\n      updateAlpha(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingAlpha.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateAlpha(event: MouseEvent | TouchEvent) {\r\n  if (!alphaRef.value) return;\r\n\r\n  const rect = alphaRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n\r\n  const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    a: x,\r\n  });\r\n}\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "ColorPicker.vue",
      "content": "<template>\r\n  <view class=\"relative\">\r\n    <view @click=\"isOpen = !isOpen\">\r\n      <slot />\r\n    </view>\r\n\r\n    <view\r\n      v-if=\"isOpen\"\r\n      class=\"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-80 p-4 bg-popover border rounded-md shadow-md z-50\"\r\n    >\r\n      <view class=\"space-y-4\">\r\n        <view\r\n          ref=\"saturationRef\"\r\n          class=\"relative w-full aspect-[4/2] rounded border cursor-crosshair\"\r\n          :style=\"{\r\n            background: `linear-gradient(to right, #fff, hsl(${colorHsv.h}, 100%, 50%)), linear-gradient(to top, #000, transparent)`,\r\n          }\"\r\n          @mousedown=\"startSaturationDrag\"\r\n          @touchstart=\"startSaturationDrag\"\r\n        >\r\n          <view\r\n            class=\"absolute w-4 h-4 border-2 border-white rounded-full pointer-events-none\"\r\n            :style=\"{\r\n              left: `${colorHsv.s}%`,\r\n              top: `${100 - colorHsv.v}%`,\r\n              transform: 'translate(-50%, -50%)',\r\n            }\"\r\n          />\r\n        </view>\r\n\r\n        <view\r\n          ref=\"hueRef\"\r\n          class=\"relative w-full h-4 rounded cursor-pointer\"\r\n          :style=\"{\r\n            background:\r\n              'linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)',\r\n          }\"\r\n          @mousedown=\"startHueDrag\"\r\n          @touchstart=\"startHueDrag\"\r\n          @click=\"handleHueClick\"\r\n        >\r\n          <view\r\n            class=\"absolute w-4 h-4 border-2 border-foreground rounded-full pointer-events-none bg-white\"\r\n            :style=\"{\r\n              left: `${(colorHsv.h / 360) * 100}%`,\r\n              transform: 'translate(-50%, -50%)',\r\n              top: '50%',\r\n            }\"\r\n          />\r\n        </view>\r\n\r\n        <view class=\"flex items-center gap-2\">\r\n          <view class=\"relative\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"inline-flex h-8 w-20 gap-2 items-center justify-between rounded-md border border-input bg-background px-2 py-1 text-xs font-medium uppercase\"\r\n              @click=\"toggleDropdown\"\r\n            >\r\n              <text>{{ colorType }}</text>\r\n              <Icon\r\n                name=\"lucide:chevron-down\"\r\n                :size=\"14\"\r\n              />\r\n            </button>\r\n\r\n            <view\r\n              v-if=\"isDropdownOpen\"\r\n              class=\"absolute top-full left-0 z-50 mt-1 w-full rounded-md border border-input bg-popover shadow-md\"\r\n            >\r\n              <view class=\"p-1\">\r\n                <button\r\n                  v-for=\"option in colorOptions\"\r\n                  :key=\"option.value\"\r\n                  type=\"button\"\r\n                  class=\"relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs font-medium uppercase hover:bg-accent hover:text-accent-foreground\"\r\n                  @click=\"selectColorType(option.value)\"\r\n                >\r\n                  {{ option.label }}\r\n                </button>\r\n              </view>\r\n            </view>\r\n          </view>\r\n\r\n          <view class=\"flex grow\">\r\n            <input\r\n              v-if=\"colorType === 'hex'\"\r\n              :value=\"hexValue\"\r\n              type=\"text\"\r\n              class=\"flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm placeholder:text-muted-foreground focus:outline-none\"\r\n              placeholder=\"#000000\"\r\n              @input=\"updateFromHex(($event.target as HTMLInputElement).value)\"\r\n            />\r\n\r\n            <ObjectColorInput\r\n              v-else\r\n              :value=\"colorType === 'hsl' || colorType === 'hsla' ? hslValue : rgbValue\"\r\n              :label=\"colorType\"\r\n              @value-change=\"updateFromObject\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view\r\n          v-if=\"colorType === 'rgba' || colorType === 'hsla'\"\r\n          class=\"space-y-2\"\r\n        >\r\n          <view\r\n            ref=\"alphaRef\"\r\n            class=\"relative w-full h-4 rounded cursor-pointer\"\r\n            :style=\"{\r\n              background: `linear-gradient(to right, rgba(${rgbValue.r}, ${rgbValue.g}, ${rgbValue.b}, 0) 0%, rgba(${rgbValue.r}, ${rgbValue.g}, ${rgbValue.b}, 1) 100%), repeating-conic-gradient(#ccc 0% 25%, transparent 0% 50%) 50% / 8px 8px`,\r\n            }\"\r\n            @mousedown=\"startAlphaDrag\"\r\n            @touchstart=\"startAlphaDrag\"\r\n          >\r\n            <view\r\n              class=\"absolute w-4 h-4 border-2 border-foreground rounded-full pointer-events-none bg-white\"\r\n              :style=\"{\r\n                left: `${colorHsv.a * 100}%`,\r\n                transform: 'translate(-50%, -50%)',\r\n                top: '50%',\r\n              }\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view v-if=\"swatches.length > 0 || !hideDefaultSwatches\">\r\n          <view class=\"h-px bg-border\" />\r\n          <view\r\n            v-if=\"!hideDefaultSwatches\"\r\n            class=\"flex flex-wrap justify-start gap-2 pt-2\"\r\n          >\r\n            <button\r\n              v-for=\"color in sortedSwatches\"\r\n              :key=\"`${color}-swatch`\"\r\n              type=\"button\"\r\n              class=\"size-5 cursor-pointer rounded ring-2 ring-transparent ring-offset-1 ring-offset-background transition-all duration-100 hover:ring-current\"\r\n              :style=\"{ backgroundColor: color }\"\r\n              :aria-label=\"`Set color to ${color}`\"\r\n              @click=\"setColorFromHex(color)\"\r\n              @keydown.enter=\"setColorFromHex(color)\"\r\n            />\r\n          </view>\r\n        </view>\r\n\r\n        <view v-if=\"!hideContrastRatio\">\r\n          <view class=\"h-px bg-border\" />\r\n          <ContrastRatio :color=\"colorHsv\" />\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view\r\n      v-if=\"isOpen\"\r\n      class=\"fixed inset-0 z-40\"\r\n      @click=\"isOpen = false\"\r\n    />\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch } from \"vue\";\r\nimport {\r\n  type HexColor,\r\n  hexToHsva,\r\n  type HslaColor,\r\n  hslaToHsva,\r\n  type HsvaColor,\r\n  hsvaToHex,\r\n  hsvaToHsla,\r\n  hsvaToRgba,\r\n  type RgbaColor,\r\n  rgbaToHsva,\r\n} from \"@uiw/color-convert\";\r\nimport ObjectColorInput from \"./ObjectColorInput.vue\";\r\nimport ContrastRatio from \"./ContrastRatio.vue\";\r\n\r\nexport interface ColorPickerValue {\r\n  hex: string;\r\n  hsl: HslaColor;\r\n  hsla: HslaColor;\r\n  rgb: RgbaColor;\r\n  rgba: RgbaColor;\r\n}\r\n\r\nexport interface ColorPickerProps {\r\n  value?: `#${string}` | HsvaColor | HslaColor | RgbaColor;\r\n  type?: \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\" | \"hex\";\r\n  swatches?: HexColor[];\r\n  hideContrastRatio?: boolean;\r\n  hideDefaultSwatches?: boolean;\r\n  class?: string;\r\n  open?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<ColorPickerProps>(), {\r\n  type: \"hsl\",\r\n  swatches: () => [],\r\n  hideContrastRatio: false,\r\n  hideDefaultSwatches: false,\r\n  open: false,\r\n});\r\n\r\nconst emit = defineEmits<{\r\n  \"value-change\": [value: ColorPickerValue];\r\n  \"update:open\": [value: boolean];\r\n}>();\r\n\r\nconst colorType = ref(props.type);\r\nconst isDropdownOpen = ref(false);\r\nconst isOpen = ref(props.open);\r\n\r\nconst colorOptions = [\r\n  { value: \"hex\", label: \"HEX\" },\r\n  { value: \"hsl\", label: \"HSL\" },\r\n  { value: \"hsla\", label: \"HSLA\" },\r\n  { value: \"rgb\", label: \"RGB\" },\r\n  { value: \"rgba\", label: \"RGBA\" },\r\n];\r\n\r\nfunction getColorAsHsva(color: ColorPickerProps[\"value\"]): HsvaColor {\r\n  if (!color) return { h: 0, s: 0, v: 0, a: 1 };\r\n\r\n  if (typeof color === \"string\") {\r\n    return hexToHsva(color);\r\n  } else if (\"h\" in color && \"s\" in color && \"v\" in color) {\r\n    return color;\r\n  } else if (\"r\" in color) {\r\n    return rgbaToHsva(color);\r\n  } else {\r\n    return hslaToHsva(color);\r\n  }\r\n}\r\n\r\nconst colorHsv = ref<HsvaColor>(getColorAsHsva(props.value));\r\n\r\nwatch(\r\n  () => props.value,\r\n  (newValue) => {\r\n    if (newValue) {\r\n      colorHsv.value = getColorAsHsva(newValue);\r\n    }\r\n  },\r\n  { deep: true },\r\n);\r\n\r\nwatch(\r\n  () => props.open,\r\n  (newValue) => {\r\n    isOpen.value = newValue;\r\n  },\r\n);\r\n\r\nwatch(isOpen, (newValue) => {\r\n  emit(\"update:open\", newValue);\r\n});\r\n\r\nconst hexValue = computed(() => hsvaToHex(colorHsv.value));\r\nconst hslValue = computed(() => hsvaToHsla(colorHsv.value));\r\nconst rgbValue = computed(() => hsvaToRgba(colorHsv.value));\r\n\r\nconst defaultSwatches = [\"#F8371A\", \"#F97C1B\", \"#FAC81C\", \"#3FD0B6\", \"#2CADF6\", \"#6462FC\"];\r\nconst sortedSwatches = computed(() => {\r\n  const allSwatches = [...defaultSwatches, ...props.swatches];\r\n  return allSwatches.sort((a, b) => hexToHsva(a).h - hexToHsva(b).h);\r\n});\r\n\r\nconst isDraggingSaturation = ref(false);\r\nconst isDraggingHue = ref(false);\r\nconst isDraggingAlpha = ref(false);\r\nconst saturationRef = ref<HTMLElement>();\r\nconst hueRef = ref<HTMLElement>();\r\nconst alphaRef = ref<HTMLElement>();\r\n\r\nfunction handleValueChange(color: HsvaColor) {\r\n  colorHsv.value = color;\r\n\r\n  const hslColor = hsvaToHsla(color);\r\n  const rgbColor = hsvaToRgba(color);\r\n\r\n  emit(\"value-change\", {\r\n    hex: hsvaToHex(color),\r\n    hsl: {\r\n      ...hslColor,\r\n      a: Math.round(hslColor.a * 100) / 100,\r\n    },\r\n    hsla: {\r\n      ...hslColor,\r\n      a: Math.round(hslColor.a * 100) / 100,\r\n    },\r\n    rgb: {\r\n      ...rgbColor,\r\n      a: Math.round(rgbColor.a * 100) / 100,\r\n    },\r\n    rgba: {\r\n      ...rgbColor,\r\n      a: Math.round(rgbColor.a * 100) / 100,\r\n    },\r\n  });\r\n}\r\n\r\nfunction updateFromHex(value: string | number) {\r\n  try {\r\n    const newColor = hexToHsva(String(value));\r\n    handleValueChange(newColor);\r\n  } catch (error) {\r\n    // Invalid hex color, ignore\r\n  }\r\n}\r\n\r\nfunction updateFromObject(value: HslaColor | RgbaColor) {\r\n  try {\r\n    const newColor = \"r\" in value ? rgbaToHsva(value) : hslaToHsva(value);\r\n    handleValueChange(newColor);\r\n  } catch (error) {\r\n    // Invalid color object, ignore\r\n  }\r\n}\r\n\r\nfunction setColorFromHex(hex: string) {\r\n  handleValueChange(hexToHsva(hex));\r\n}\r\n\r\nfunction toggleDropdown() {\r\n  isDropdownOpen.value = !isDropdownOpen.value;\r\n}\r\n\r\nfunction selectColorType(value: string) {\r\n  colorType.value = value as \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\" | \"hex\";\r\n  isDropdownOpen.value = false;\r\n}\r\n\r\nfunction startSaturationDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingSaturation.value = true;\r\n  updateSaturation(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingSaturation.value) {\r\n      updateSaturation(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingSaturation.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateSaturation(event: MouseEvent | TouchEvent) {\r\n  if (!saturationRef.value) return;\r\n\r\n  const rect = saturationRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n  const clientY = \"touches\" in event ? event.touches[0].clientY : event.clientY;\r\n\r\n  const relativeX = (clientX - rect.left) / rect.width;\r\n  const relativeY = (clientY - rect.top) / rect.height;\r\n\r\n  const x = Math.max(0.01, Math.min(0.99, relativeX));\r\n  const y = Math.max(0.01, Math.min(0.99, relativeY));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    s: x * 100,\r\n    v: (1 - y) * 100,\r\n  });\r\n}\r\n\r\nfunction handleHueClick(event: MouseEvent) {\r\n  updateHue(event);\r\n}\r\n\r\nfunction startHueDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingHue.value = true;\r\n  updateHue(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingHue.value) {\r\n      updateHue(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingHue.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateHue(event: MouseEvent | TouchEvent) {\r\n  if (!hueRef.value) return;\r\n\r\n  const rect = hueRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n\r\n  const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    h: x * 360,\r\n  });\r\n}\r\n\r\nfunction startAlphaDrag(event: MouseEvent | TouchEvent) {\r\n  event.preventDefault();\r\n  isDraggingAlpha.value = true;\r\n  updateAlpha(event);\r\n\r\n  function handleMove(e: MouseEvent | TouchEvent) {\r\n    if (isDraggingAlpha.value) {\r\n      updateAlpha(e);\r\n    }\r\n  }\r\n\r\n  function handleEnd() {\r\n    isDraggingAlpha.value = false;\r\n    document.removeEventListener(\"mousemove\", handleMove);\r\n    document.removeEventListener(\"mouseup\", handleEnd);\r\n    document.removeEventListener(\"touchmove\", handleMove);\r\n    document.removeEventListener(\"touchend\", handleEnd);\r\n  }\r\n\r\n  document.addEventListener(\"mousemove\", handleMove);\r\n  document.addEventListener(\"mouseup\", handleEnd);\r\n  document.addEventListener(\"touchmove\", handleMove);\r\n  document.addEventListener(\"touchend\", handleEnd);\r\n}\r\n\r\nfunction updateAlpha(event: MouseEvent | TouchEvent) {\r\n  if (!alphaRef.value) return;\r\n\r\n  const rect = alphaRef.value.getBoundingClientRect();\r\n  const clientX = \"touches\" in event ? event.touches[0].clientX : event.clientX;\r\n\r\n  const x = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));\r\n\r\n  handleValueChange({\r\n    ...colorHsv.value,\r\n    a: x,\r\n  });\r\n}\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "ContrastRatio.vue",
      "content": "<template>\r\n  <div class=\"flex items-center justify-between gap-4 pt-2 select-none\">\r\n    <div class=\"flex items-center gap-4\">\r\n      <div\r\n        class=\"flex size-10 items-center justify-center rounded border\"\r\n        :style=\"{\r\n          backgroundColor: `rgba(${rgbaColor.r}, ${rgbaColor.g}, ${rgbaColor.b}, ${rgbaColor.a})`,\r\n          backgroundSize: '8px 8px',\r\n        }\"\r\n      >\r\n        <span\r\n          class=\"font-medium\"\r\n          :style=\"{\r\n            color: shouldUseWhiteText ? 'white' : 'black',\r\n          }\"\r\n          >A</span\r\n        >\r\n      </div>\r\n      <div class=\"flex flex-col justify-between\">\r\n        <span class=\"whitespace-nowrap text-nowrap text-xs text-muted-foreground\">\r\n          Contrast Ratio\r\n        </span>\r\n        <span class=\"text-sm\">{{ currentContrastRatio }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex items-center justify-end gap-1 *:select-none\">\r\n      <UiBadge\r\n        :variant=\"isAccessible.aa ? 'default' : 'secondary'\"\r\n        class=\"gap-1\"\r\n      >\r\n        <Icon\r\n          :name=\"isAccessible.aa ? 'lucide:check' : 'lucide:x'\"\r\n          :size=\"12\"\r\n        />\r\n        AA\r\n      </UiBadge>\r\n      <UiBadge\r\n        :variant=\"isAccessible.aaa ? 'default' : 'secondary'\"\r\n        class=\"gap-1\"\r\n      >\r\n        <Icon\r\n          :name=\"isAccessible.aaa ? 'lucide:check' : 'lucide:x'\"\r\n          :size=\"12\"\r\n        />\r\n        AAA\r\n      </UiBadge>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { watch, ref, computed } from \"vue\";\r\nimport type { HsvaColor } from \"@uiw/color-convert\";\r\nimport { hsvaToRgba } from \"@uiw/color-convert\";\r\n\r\nexport interface ContrastRatioProps {\r\n  color: HsvaColor;\r\n}\r\n\r\nconst props = defineProps<ContrastRatioProps>();\r\n\r\nconst darkModeContrastRatio = ref(0);\r\nconst lightModeContrastValue = ref(0);\r\n\r\nconst rgbaColor = computed(() => hsvaToRgba(props.color));\r\n\r\nconst shouldUseWhiteText = computed(() => {\r\n  const rgb = rgbaColor.value;\r\n  // Calculate luminance of the color background\r\n  const r = rgb.r / 255;\r\n  const g = rgb.g / 255;\r\n  const b = rgb.b / 255;\r\n\r\n  const rLinear = r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4);\r\n  const gLinear = g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4);\r\n  const bLinear = b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);\r\n\r\n  const luminance = 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;\r\n\r\n  // Use white text if the background is dark (luminance < 0.5)\r\n  return luminance < 0.5;\r\n});\r\n\r\nconst currentContrastRatio = computed(() => {\r\n  // For accessibility, use the better of the two contrast ratios (dark or light mode)\r\n  // This gives the most accurate assessment of accessibility across different contexts\r\n  return Math.max(darkModeContrastRatio.value, lightModeContrastValue.value);\r\n});\r\n\r\nconst isAccessible = computed(() => {\r\n  return {\r\n    aa: currentContrastRatio.value >= 4.5,\r\n    aaa: currentContrastRatio.value >= 7,\r\n  };\r\n});\r\n\r\nfunction calculateContrastRatios(color: HsvaColor) {\r\n  const rgb = hsvaToRgba(color);\r\n\r\n  function toSRGB(c: number) {\r\n    const channel = c / 255;\r\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\r\n  }\r\n\r\n  function alphaBlend(foreground: number, background: number, alpha: number) {\r\n    return foreground * alpha + background * (1 - alpha);\r\n  }\r\n\r\n  // Apply alpha blending for light background (white: 255)\r\n  const lightR = alphaBlend(rgb.r, 255, rgb.a);\r\n  const lightG = alphaBlend(rgb.g, 255, rgb.a);\r\n  const lightB = alphaBlend(rgb.b, 255, rgb.a);\r\n\r\n  // Apply alpha blending for dark background (dark gray: 32)\r\n  const darkR = alphaBlend(rgb.r, 32, rgb.a);\r\n  const darkG = alphaBlend(rgb.g, 32, rgb.a);\r\n  const darkB = alphaBlend(rgb.b, 32, rgb.a);\r\n\r\n  // Calculate luminance for light background composition\r\n  const lightRSRGB = toSRGB(lightR);\r\n  const lightGSRGB = toSRGB(lightG);\r\n  const lightBSRGB = toSRGB(lightB);\r\n  const lightLuminance = 0.2126 * lightRSRGB + 0.7152 * lightGSRGB + 0.0722 * lightBSRGB;\r\n\r\n  // Calculate luminance for dark background composition\r\n  const darkRSRGB = toSRGB(darkR);\r\n  const darkGSRGB = toSRGB(darkG);\r\n  const darkBSRGB = toSRGB(darkB);\r\n  const darkLuminance = 0.2126 * darkRSRGB + 0.7152 * darkGSRGB + 0.0722 * darkBSRGB;\r\n\r\n  // Text color luminances (what we're measuring contrast against)\r\n  const whiteTextLuminance = 1.0;\r\n  const blackTextLuminance = 0.0;\r\n\r\n  // Calculate contrast ratios: text against the color background (alpha-blended)\r\n  // For dark mode: white text against the dark-composited color\r\n  const darkModeRatio =\r\n    (Math.max(whiteTextLuminance, darkLuminance) + 0.05) /\r\n    (Math.min(whiteTextLuminance, darkLuminance) + 0.05);\r\n  // For light mode: black text against the light-composited color\r\n  const lightModeRatio =\r\n    (Math.max(blackTextLuminance, lightLuminance) + 0.05) /\r\n    (Math.min(blackTextLuminance, lightLuminance) + 0.05);\r\n\r\n  darkModeContrastRatio.value = Number(darkModeRatio.toFixed(2));\r\n  lightModeContrastValue.value = Number(lightModeRatio.toFixed(2));\r\n}\r\n\r\nwatch(() => props.color, calculateContrastRatios, { immediate: true, deep: true });\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "ContrastRatio.vue",
      "content": "<template>\r\n  <view class=\"flex items-center justify-between gap-4 pt-2 select-none\">\r\n    <view class=\"flex items-center gap-4\">\r\n      <view\r\n        class=\"flex size-10 items-center justify-center rounded border\"\r\n        :style=\"{\r\n          backgroundColor: `rgba(${rgbaColor.r}, ${rgbaColor.g}, ${rgbaColor.b}, ${rgbaColor.a})`,\r\n          backgroundSize: '8px 8px',\r\n        }\"\r\n      >\r\n        <text\r\n          class=\"font-medium\"\r\n          :style=\"{\r\n            color: shouldUseWhiteText ? 'white' : 'black',\r\n          }\"\r\n          >A</span\r\n        >\r\n      </view>\r\n      <view class=\"flex flex-col justify-between\">\r\n        <text class=\"whitespace-nowrap text-nowrap text-xs text-muted-foreground\">\r\n          Contrast Ratio\r\n        </text>\r\n        <text class=\"text-sm\">{{ currentContrastRatio }}</text>\r\n      </view>\r\n    </view>\r\n    <view class=\"flex items-center justify-end gap-1 *:select-none\">\r\n      <UiBadge\r\n        :variant=\"isAccessible.aa ? 'default' : 'secondary'\"\r\n        class=\"gap-1\"\r\n      >\r\n        <Icon\r\n          :name=\"isAccessible.aa ? 'lucide:check' : 'lucide:x'\"\r\n          :size=\"12\"\r\n        />\r\n        AA\r\n      </UiBadge>\r\n      <UiBadge\r\n        :variant=\"isAccessible.aaa ? 'default' : 'secondary'\"\r\n        class=\"gap-1\"\r\n      >\r\n        <Icon\r\n          :name=\"isAccessible.aaa ? 'lucide:check' : 'lucide:x'\"\r\n          :size=\"12\"\r\n        />\r\n        AAA\r\n      </UiBadge>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { watch, ref, computed } from \"vue\";\r\nimport type { HsvaColor } from \"@uiw/color-convert\";\r\nimport { hsvaToRgba } from \"@uiw/color-convert\";\r\n\r\nexport interface ContrastRatioProps {\r\n  color: HsvaColor;\r\n}\r\n\r\nconst props = defineProps<ContrastRatioProps>();\r\n\r\nconst darkModeContrastRatio = ref(0);\r\nconst lightModeContrastValue = ref(0);\r\n\r\nconst rgbaColor = computed(() => hsvaToRgba(props.color));\r\n\r\nconst shouldUseWhiteText = computed(() => {\r\n  const rgb = rgbaColor.value;\r\n  // Calculate luminance of the color background\r\n  const r = rgb.r / 255;\r\n  const g = rgb.g / 255;\r\n  const b = rgb.b / 255;\r\n\r\n  const rLinear = r <= 0.03928 ? r / 12.92 : Math.pow((r + 0.055) / 1.055, 2.4);\r\n  const gLinear = g <= 0.03928 ? g / 12.92 : Math.pow((g + 0.055) / 1.055, 2.4);\r\n  const bLinear = b <= 0.03928 ? b / 12.92 : Math.pow((b + 0.055) / 1.055, 2.4);\r\n\r\n  const luminance = 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;\r\n\r\n  // Use white text if the background is dark (luminance < 0.5)\r\n  return luminance < 0.5;\r\n});\r\n\r\nconst currentContrastRatio = computed(() => {\r\n  // For accessibility, use the better of the two contrast ratios (dark or light mode)\r\n  // This gives the most accurate assessment of accessibility across different contexts\r\n  return Math.max(darkModeContrastRatio.value, lightModeContrastValue.value);\r\n});\r\n\r\nconst isAccessible = computed(() => {\r\n  return {\r\n    aa: currentContrastRatio.value >= 4.5,\r\n    aaa: currentContrastRatio.value >= 7,\r\n  };\r\n});\r\n\r\nfunction calculateContrastRatios(color: HsvaColor) {\r\n  const rgb = hsvaToRgba(color);\r\n\r\n  function toSRGB(c: number) {\r\n    const channel = c / 255;\r\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\r\n  }\r\n\r\n  function alphaBlend(foreground: number, background: number, alpha: number) {\r\n    return foreground * alpha + background * (1 - alpha);\r\n  }\r\n\r\n  // Apply alpha blending for light background (white: 255)\r\n  const lightR = alphaBlend(rgb.r, 255, rgb.a);\r\n  const lightG = alphaBlend(rgb.g, 255, rgb.a);\r\n  const lightB = alphaBlend(rgb.b, 255, rgb.a);\r\n\r\n  // Apply alpha blending for dark background (dark gray: 32)\r\n  const darkR = alphaBlend(rgb.r, 32, rgb.a);\r\n  const darkG = alphaBlend(rgb.g, 32, rgb.a);\r\n  const darkB = alphaBlend(rgb.b, 32, rgb.a);\r\n\r\n  // Calculate luminance for light background composition\r\n  const lightRSRGB = toSRGB(lightR);\r\n  const lightGSRGB = toSRGB(lightG);\r\n  const lightBSRGB = toSRGB(lightB);\r\n  const lightLuminance = 0.2126 * lightRSRGB + 0.7152 * lightGSRGB + 0.0722 * lightBSRGB;\r\n\r\n  // Calculate luminance for dark background composition\r\n  const darkRSRGB = toSRGB(darkR);\r\n  const darkGSRGB = toSRGB(darkG);\r\n  const darkBSRGB = toSRGB(darkB);\r\n  const darkLuminance = 0.2126 * darkRSRGB + 0.7152 * darkGSRGB + 0.0722 * darkBSRGB;\r\n\r\n  // Text color luminances (what we're measuring contrast against)\r\n  const whiteTextLuminance = 1.0;\r\n  const blackTextLuminance = 0.0;\r\n\r\n  // Calculate contrast ratios: text against the color background (alpha-blended)\r\n  // For dark mode: white text against the dark-composited color\r\n  const darkModeRatio =\r\n    (Math.max(whiteTextLuminance, darkLuminance) + 0.05) /\r\n    (Math.min(whiteTextLuminance, darkLuminance) + 0.05);\r\n  // For light mode: black text against the light-composited color\r\n  const lightModeRatio =\r\n    (Math.max(blackTextLuminance, lightLuminance) + 0.05) /\r\n    (Math.min(blackTextLuminance, lightLuminance) + 0.05);\r\n\r\n  darkModeContrastRatio.value = Number(darkModeRatio.toFixed(2));\r\n  lightModeContrastValue.value = Number(lightModeRatio.toFixed(2));\r\n}\r\n\r\nwatch(() => props.color, calculateContrastRatios, { immediate: true, deep: true });\r\n</script>\r\n",
      "target": "uniapp"
    },
    {
      "path": "index.ts",
      "content": "export { default as ColorPicker } from \"./ColorPicker.vue\";\r\nexport { default as ContrastRatio } from \"./ContrastRatio.vue\";\r\nexport { default as ObjectColorInput } from \"./ObjectColorInput.vue\";\r\n\r\nexport type { ColorPickerValue, ColorPickerProps } from \"./ColorPicker.vue\";\r\n"
    },
    {
      "path": "ObjectColorInput.vue",
      "content": "<template>\r\n  <div class=\"flex w-full min-w-0\">\r\n    <input\r\n      v-for=\"(input, idx) in inputs\"\r\n      :key=\"input.key\"\r\n      :value=\"inputValues[idx]\"\r\n      :min=\"input.min\"\r\n      :max=\"input.max\"\r\n      :class=\"input.class\"\r\n      step=\"1\"\r\n      @input=\"handleChange(idx, $event)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from \"vue\";\r\nimport type { HslaColor, RgbaColor } from \"@uiw/color-convert\";\r\n\r\ninterface ObjectColorInputProps {\r\n  label: \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\";\r\n  value: HslaColor | RgbaColor;\r\n}\r\n\r\nconst props = defineProps<ObjectColorInputProps>();\r\nconst emit = defineEmits<{ \"value-change\": [value: HslaColor | RgbaColor] }>();\r\n\r\nconst inputValues = computed(() => {\r\n  return getInputValues(props.value);\r\n});\r\n\r\nfunction getInputValues(value: HslaColor | RgbaColor): number[] {\r\n  const isHsl = props.label === \"hsl\" || props.label === \"hsla\";\r\n  const hasAlpha = props.label === \"hsla\" || props.label === \"rgba\";\r\n\r\n  if (isHsl) {\r\n    const hsl = value as HslaColor;\r\n    const values = [Math.round(hsl.h), Math.round(hsl.s), Math.round(hsl.l)];\r\n    if (hasAlpha) {\r\n      values.push(Math.round(hsl.a * 100));\r\n    }\r\n    return values;\r\n  } else {\r\n    const rgb = value as RgbaColor;\r\n    const values = [Math.round(rgb.r), Math.round(rgb.g), Math.round(rgb.b)];\r\n    if (hasAlpha) {\r\n      values.push(Math.round(rgb.a * 100));\r\n    }\r\n    return values;\r\n  }\r\n}\r\n\r\nfunction getInputClass(index: number, totalInputs: number): string {\r\n  const baseClass =\r\n    \"flex-1 w-0 h-8 px-2 py-1 text-xs border border-input bg-background text-center overflow-hidden focus:outline-none focus-visible:outline-none focus:ring-0 focus-visible:ring-0\";\r\n\r\n  const isFirst = index === 0;\r\n  const isLast = index === totalInputs - 1;\r\n  const isMiddle = !isFirst && !isLast;\r\n\r\n  let positionClasses = \"\";\r\n  if (isFirst) {\r\n    positionClasses = \"rounded-l-md -mr-px\";\r\n  } else if (isLast) {\r\n    positionClasses = \"rounded-r-md\";\r\n  } else if (isMiddle) {\r\n    positionClasses = \"rounded-none -mr-px\";\r\n  }\r\n\r\n  return `${baseClass} ${positionClasses}`;\r\n}\r\n\r\nconst inputs = computed(() => {\r\n  const isHsl = props.label === \"hsl\" || props.label === \"hsla\";\r\n  const hasAlpha = props.label === \"hsla\" || props.label === \"rgba\";\r\n\r\n  let inputsData;\r\n  if (isHsl) {\r\n    const hsl = props.value as HslaColor;\r\n    inputsData = [\r\n      { key: \"h\", value: Math.round(hsl.h), min: 0, max: 360, prop: \"h\" },\r\n      { key: \"s\", value: Math.round(hsl.s), min: 0, max: 100, prop: \"s\" },\r\n      { key: \"l\", value: Math.round(hsl.l), min: 0, max: 100, prop: \"l\" },\r\n    ];\r\n    if (hasAlpha) {\r\n      inputsData.push({ key: \"a\", value: Math.round(hsl.a * 100), min: 0, max: 100, prop: \"a\" });\r\n    }\r\n  } else {\r\n    const rgb = props.value as RgbaColor;\r\n    inputsData = [\r\n      { key: \"r\", value: Math.round(rgb.r), min: 0, max: 255, prop: \"r\" },\r\n      { key: \"g\", value: Math.round(rgb.g), min: 0, max: 255, prop: \"g\" },\r\n      { key: \"b\", value: Math.round(rgb.b), min: 0, max: 255, prop: \"b\" },\r\n    ];\r\n    if (hasAlpha) {\r\n      inputsData.push({ key: \"a\", value: Math.round(rgb.a * 100), min: 0, max: 100, prop: \"a\" });\r\n    }\r\n  }\r\n\r\n  return inputsData.map((input, index) => ({\r\n    ...input,\r\n    class: getInputClass(index, inputsData.length),\r\n  }));\r\n});\r\n\r\nfunction handleChange(idx: number, event: Event) {\r\n  const target = event.target as HTMLInputElement;\r\n  const value = Number(target.value);\r\n  if (Number.isNaN(value)) return;\r\n\r\n  const input = inputs.value[idx];\r\n  const clampedValue = Math.max(input.min, Math.min(input.max, value));\r\n  const finalValue = input.prop === \"a\" ? clampedValue / 100 : clampedValue;\r\n\r\n  emit(\"value-change\", { ...props.value, [input.prop]: finalValue } as HslaColor | RgbaColor);\r\n}\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "ObjectColorInput.vue",
      "content": "<template>\r\n  <view class=\"flex w-full min-w-0\">\r\n    <input\r\n      v-for=\"(input, idx) in inputs\"\r\n      :key=\"input.key\"\r\n      :value=\"inputValues[idx]\"\r\n      :min=\"input.min\"\r\n      :max=\"input.max\"\r\n      :class=\"input.class\"\r\n      step=\"1\"\r\n      @input=\"handleChange(idx, $event)\"\r\n    />\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from \"vue\";\r\nimport type { HslaColor, RgbaColor } from \"@uiw/color-convert\";\r\n\r\ninterface ObjectColorInputProps {\r\n  label: \"hsl\" | \"hsla\" | \"rgb\" | \"rgba\";\r\n  value: HslaColor | RgbaColor;\r\n}\r\n\r\nconst props = defineProps<ObjectColorInputProps>();\r\nconst emit = defineEmits<{ \"value-change\": [value: HslaColor | RgbaColor] }>();\r\n\r\nconst inputValues = computed(() => {\r\n  return getInputValues(props.value);\r\n});\r\n\r\nfunction getInputValues(value: HslaColor | RgbaColor): number[] {\r\n  const isHsl = props.label === \"hsl\" || props.label === \"hsla\";\r\n  const hasAlpha = props.label === \"hsla\" || props.label === \"rgba\";\r\n\r\n  if (isHsl) {\r\n    const hsl = value as HslaColor;\r\n    const values = [Math.round(hsl.h), Math.round(hsl.s), Math.round(hsl.l)];\r\n    if (hasAlpha) {\r\n      values.push(Math.round(hsl.a * 100));\r\n    }\r\n    return values;\r\n  } else {\r\n    const rgb = value as RgbaColor;\r\n    const values = [Math.round(rgb.r), Math.round(rgb.g), Math.round(rgb.b)];\r\n    if (hasAlpha) {\r\n      values.push(Math.round(rgb.a * 100));\r\n    }\r\n    return values;\r\n  }\r\n}\r\n\r\nfunction getInputClass(index: number, totalInputs: number): string {\r\n  const baseClass =\r\n    \"flex-1 w-0 h-8 px-2 py-1 text-xs border border-input bg-background text-center overflow-hidden focus:outline-none focus-visible:outline-none focus:ring-0 focus-visible:ring-0\";\r\n\r\n  const isFirst = index === 0;\r\n  const isLast = index === totalInputs - 1;\r\n  const isMiddle = !isFirst && !isLast;\r\n\r\n  let positionClasses = \"\";\r\n  if (isFirst) {\r\n    positionClasses = \"rounded-l-md -mr-px\";\r\n  } else if (isLast) {\r\n    positionClasses = \"rounded-r-md\";\r\n  } else if (isMiddle) {\r\n    positionClasses = \"rounded-none -mr-px\";\r\n  }\r\n\r\n  return `${baseClass} ${positionClasses}`;\r\n}\r\n\r\nconst inputs = computed(() => {\r\n  const isHsl = props.label === \"hsl\" || props.label === \"hsla\";\r\n  const hasAlpha = props.label === \"hsla\" || props.label === \"rgba\";\r\n\r\n  let inputsData;\r\n  if (isHsl) {\r\n    const hsl = props.value as HslaColor;\r\n    inputsData = [\r\n      { key: \"h\", value: Math.round(hsl.h), min: 0, max: 360, prop: \"h\" },\r\n      { key: \"s\", value: Math.round(hsl.s), min: 0, max: 100, prop: \"s\" },\r\n      { key: \"l\", value: Math.round(hsl.l), min: 0, max: 100, prop: \"l\" },\r\n    ];\r\n    if (hasAlpha) {\r\n      inputsData.push({ key: \"a\", value: Math.round(hsl.a * 100), min: 0, max: 100, prop: \"a\" });\r\n    }\r\n  } else {\r\n    const rgb = props.value as RgbaColor;\r\n    inputsData = [\r\n      { key: \"r\", value: Math.round(rgb.r), min: 0, max: 255, prop: \"r\" },\r\n      { key: \"g\", value: Math.round(rgb.g), min: 0, max: 255, prop: \"g\" },\r\n      { key: \"b\", value: Math.round(rgb.b), min: 0, max: 255, prop: \"b\" },\r\n    ];\r\n    if (hasAlpha) {\r\n      inputsData.push({ key: \"a\", value: Math.round(rgb.a * 100), min: 0, max: 100, prop: \"a\" });\r\n    }\r\n  }\r\n\r\n  return inputsData.map((input, index) => ({\r\n    ...input,\r\n    class: getInputClass(index, inputsData.length),\r\n  }));\r\n});\r\n\r\nfunction handleChange(idx: number, event: Event) {\r\n  const target = event.target as HTMLInputElement;\r\n  const value = Number(target.value);\r\n  if (Number.isNaN(value)) return;\r\n\r\n  const input = inputs.value[idx];\r\n  const clampedValue = Math.max(input.min, Math.min(input.max, value));\r\n  const finalValue = input.prop === \"a\" ? clampedValue / 100 : clampedValue;\r\n\r\n  emit(\"value-change\", { ...props.value, [input.prop]: finalValue } as HslaColor | RgbaColor);\r\n}\r\n</script>\r\n",
      "target": "uniapp"
    }
  ],
  "fileCount": 7,
  "contentHash": "e5c4e5de43e47281a4a09bfbc57895c56026a172"
}
