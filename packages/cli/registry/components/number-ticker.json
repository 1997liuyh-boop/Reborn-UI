{
  "name": "number-ticker",
  "dependencies": [
    "@vueuse/core"
  ],
  "files": [
    {
      "path": "index.ts",
      "content": "export { default as NumberTicker } from \"./NumberTicker.vue\";\r\n"
    },
    {
      "path": "NumberTicker.vue",
      "content": "<template>\r\n  <span\r\n    ref=\"spanRef\"\r\n    :class=\"cn('inline-block tabular-nums text-black dark:text-white tracking-wider', props.class)\"\r\n  >\r\n    {{ output }}\r\n  </span>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { TransitionPresets, useElementVisibility, useTransition } from \"@vueuse/core\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ref, watch, computed } from \"vue\";\r\n\r\ntype TransitionsPresetsKeys = keyof typeof TransitionPresets;\r\n\r\ninterface NumberTickerProps {\r\n  value?: number;\r\n  direction?: \"up\" | \"down\";\r\n  duration?: number;\r\n  delay?: number;\r\n  decimalPlaces?: number;\r\n  class?: string;\r\n  transition?: TransitionsPresetsKeys;\r\n}\r\n\r\nconst spanRef = ref<HTMLSpanElement>();\r\n\r\nconst props = withDefaults(defineProps<NumberTickerProps>(), {\r\n  value: 0,\r\n  direction: \"up\",\r\n  delay: 0,\r\n  duration: 1000,\r\n  decimalPlaces: 2,\r\n  transition: \"easeOutCubic\",\r\n});\r\n\r\nconst transitionValue = ref(props.direction === \"down\" ? props.value : 0);\r\n\r\nconst transitionOutput = useTransition(transitionValue, {\r\n  delay: props.delay,\r\n  duration: props.duration,\r\n  transition: TransitionPresets[props.transition],\r\n});\r\n\r\nconst output = computed(() => {\r\n  return new Intl.NumberFormat(\"en-US\", {\r\n    minimumFractionDigits: props.decimalPlaces,\r\n    maximumFractionDigits: props.decimalPlaces,\r\n  }).format(Number(transitionOutput.value.toFixed(props.decimalPlaces)));\r\n});\r\n\r\nconst isInView = useElementVisibility(spanRef, {\r\n  threshold: 0,\r\n});\r\n\r\nconst hasBeenInView = ref(false);\r\n\r\nconst stopIsInViewWatcher = watch(\r\n  isInView,\r\n  (isVisible) => {\r\n    if (isVisible && !hasBeenInView.value) {\r\n      hasBeenInView.value = true;\r\n      transitionValue.value = props.direction === \"down\" ? 0 : props.value;\r\n      stopIsInViewWatcher();\r\n    }\r\n  },\r\n  { immediate: true },\r\n);\r\n\r\nwatch(\r\n  () => props.value,\r\n  (newVal) => {\r\n    if (hasBeenInView.value) {\r\n      transitionValue.value = props.direction === \"down\" ? 0 : newVal;\r\n    }\r\n  },\r\n);\r\n</script>\r\n",
      "target": "web"
    },
    {
      "path": "NumberTicker.vue",
      "content": "<template>\r\n  <text\r\n    ref=\"spanRef\"\r\n    :class=\"cn('inline-block tabular-nums text-black dark:text-white tracking-wider', props.class)\"\r\n  >\r\n    {{ output }}\r\n  </text>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { TransitionPresets, useElementVisibility, useTransition } from \"@vueuse/core\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ref, watch, computed } from \"vue\";\r\n\r\ntype TransitionsPresetsKeys = keyof typeof TransitionPresets;\r\n\r\ninterface NumberTickerProps {\r\n  value?: number;\r\n  direction?: \"up\" | \"down\";\r\n  duration?: number;\r\n  delay?: number;\r\n  decimalPlaces?: number;\r\n  class?: string;\r\n  transition?: TransitionsPresetsKeys;\r\n}\r\n\r\nconst spanRef = ref<HTMLSpanElement>();\r\n\r\nconst props = withDefaults(defineProps<NumberTickerProps>(), {\r\n  value: 0,\r\n  direction: \"up\",\r\n  delay: 0,\r\n  duration: 1000,\r\n  decimalPlaces: 2,\r\n  transition: \"easeOutCubic\",\r\n});\r\n\r\nconst transitionValue = ref(props.direction === \"down\" ? props.value : 0);\r\n\r\nconst transitionOutput = useTransition(transitionValue, {\r\n  delay: props.delay,\r\n  duration: props.duration,\r\n  transition: TransitionPresets[props.transition],\r\n});\r\n\r\nconst output = computed(() => {\r\n  return new Intl.NumberFormat(\"en-US\", {\r\n    minimumFractionDigits: props.decimalPlaces,\r\n    maximumFractionDigits: props.decimalPlaces,\r\n  }).format(Number(transitionOutput.value.toFixed(props.decimalPlaces)));\r\n});\r\n\r\nconst isInView = useElementVisibility(spanRef, {\r\n  threshold: 0,\r\n});\r\n\r\nconst hasBeenInView = ref(false);\r\n\r\nconst stopIsInViewWatcher = watch(\r\n  isInView,\r\n  (isVisible) => {\r\n    if (isVisible && !hasBeenInView.value) {\r\n      hasBeenInView.value = true;\r\n      transitionValue.value = props.direction === \"down\" ? 0 : props.value;\r\n      stopIsInViewWatcher();\r\n    }\r\n  },\r\n  { immediate: true },\r\n);\r\n\r\nwatch(\r\n  () => props.value,\r\n  (newVal) => {\r\n    if (hasBeenInView.value) {\r\n      transitionValue.value = props.direction === \"down\" ? 0 : newVal;\r\n    }\r\n  },\r\n);\r\n</script>\r\n",
      "target": "uniapp"
    }
  ],
  "fileCount": 3,
  "contentHash": "a7e6cde24d449302be55b8d9969fffd1b5da8ff3"
}
