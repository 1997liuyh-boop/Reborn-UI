{
  "name": "wavy-background",
  "dependencies": [
    "@vueuse/core",
    "simplex-noise"
  ],
  "files": [
    {
      "path": "index.ts",
      "content": "export { default as WavyBackground } from \"./WavyBackground.vue\";\r\n"
    },
    {
      "path": "WavyBackground.vue",
      "content": "<template>\r\n  <div :class=\"cn('h-screen flex flex-col items-center justify-center', props.containerClass)\">\r\n    <canvas\r\n      id=\"canvas\"\r\n      ref=\"canvasRef\"\r\n      class=\"absolute z-0\"\r\n      :style=\"{ filter: isSafari ? `blur(${props.blur}px)` : undefined }\"\r\n    ></canvas>\r\n    <div :class=\"cn('relative z-10', props.class)\">\r\n      <slot />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { createNoise3D } from \"simplex-noise\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ref, onMounted, onBeforeUnmount } from \"vue\";\r\nimport { templateRef } from \"@vueuse/core\";\r\n\r\ninterface WavyBackgroundProps {\r\n  class?: string;\r\n  containerClass?: string;\r\n  colors?: string[];\r\n  waveWidth?: number;\r\n  backgroundFill?: string;\r\n  blur?: number;\r\n  speed?: \"slow\" | \"fast\";\r\n  waveOpacity?: number;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  [key: string]: any;\r\n}\r\n\r\nconst props = withDefaults(defineProps<WavyBackgroundProps>(), {\r\n  colors: () => [\"#38bdf8\", \"#818cf8\", \"#c084fc\", \"#e879f9\", \"#22d3ee\"],\r\n  waveWidth: 50,\r\n  backgroundFill: \"black\",\r\n  blur: 10,\r\n  speed: \"fast\",\r\n  waveOpacity: 0.5,\r\n});\r\n\r\nconst noise = createNoise3D();\r\n\r\n// Declare variables with null\r\nlet w: number,\r\n  h: number,\r\n  nt = 0,\r\n  ctx: CanvasRenderingContext2D | null = null;\r\nlet animationId: number;\r\n\r\nconst canvasRef = templateRef<HTMLCanvasElement | null>(\"canvasRef\");\r\n\r\nfunction getSpeed(): number {\r\n  return props.speed === \"slow\" ? 0.001 : 0.002;\r\n}\r\n\r\nfunction init() {\r\n  const canvas = canvasRef.value;\r\n  if (canvas) {\r\n    ctx = canvas.getContext(\"2d\");\r\n    if (ctx) {\r\n      const parent = canvasRef.value.parentElement;\r\n      if (parent) {\r\n        w = ctx.canvas.width = parent.clientWidth;\r\n        h = ctx.canvas.height = parent.clientHeight;\r\n      }\r\n\r\n      ctx.filter = `blur(${props.blur}px)`;\r\n      window.onresize = () => {\r\n        if (parent) {\r\n          w = ctx!.canvas.width = parent.clientWidth;\r\n          h = ctx!.canvas.height = parent.clientHeight;\r\n        }\r\n        ctx!.filter = `blur(${props.blur}px)`;\r\n      };\r\n      render();\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawWave(n: number) {\r\n  nt += getSpeed();\r\n  for (let i = 0; i < n; i++) {\r\n    ctx!.beginPath();\r\n    ctx!.lineWidth = props.waveWidth!;\r\n    ctx!.strokeStyle = props.colors[i % props.colors!.length];\r\n    for (let x = 0; x < w; x += 5) {\r\n      const y = noise(x / 800, 0.3 * i, nt) * 100;\r\n      ctx!.lineTo(x, y + h * 0.5); // Adjust for height, at 50% of the container\r\n    }\r\n    ctx!.stroke();\r\n    ctx!.closePath();\r\n  }\r\n}\r\n\r\nfunction render() {\r\n  if (ctx) {\r\n    ctx.fillStyle = props.backgroundFill!;\r\n    ctx.globalAlpha = props.waveOpacity!;\r\n    ctx.fillRect(0, 0, w, h);\r\n    drawWave(5);\r\n    animationId = requestAnimationFrame(render);\r\n  }\r\n}\r\n\r\nonBeforeUnmount(() => {\r\n  cancelAnimationFrame(animationId);\r\n});\r\n\r\nconst isSafari = ref(false);\r\nonMounted(() => {\r\n  isSafari.value =\r\n    typeof window !== \"undefined\" &&\r\n    navigator.userAgent.includes(\"Safari\") &&\r\n    !navigator.userAgent.includes(\"Chrome\");\r\n\r\n  init();\r\n});\r\n</script>\r\n"
    }
  ],
  "fileCount": 2,
  "contentHash": "229d1e1599b1b63c68d201e37569a02aef39fb70"
}
