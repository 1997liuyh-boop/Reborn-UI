{
  "name": "apple-card-carousel",
  "dependencies": [
    "@vueuse/core",
    "motion-v"
  ],
  "files": [
    {
      "path": "AppleBlurImage.vue",
      "content": "<template>\r\n  <img\r\n    :class=\"\r\n      cn(\r\n        'transition duration-300',\r\n        isLoading ? 'blur-sm' : 'blur-0',\r\n        props.class,\r\n        fill ? 'h-full w-full' : '',\r\n      )\r\n    \"\r\n    :src=\"src\"\r\n    :width=\"width\"\r\n    :height=\"height\"\r\n    loading=\"lazy\"\r\n    decoding=\"async\"\r\n    :alt=\"alt\"\r\n    @load=\"handleLoad\"\r\n  />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Props {\r\n  height?: number | string;\r\n  width?: number | string;\r\n  src: string;\r\n  class?: string;\r\n  alt?: string;\r\n  fill?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  height: undefined,\r\n  width: undefined,\r\n  class: \"\",\r\n  alt: \"Background of a beautiful view\",\r\n  fill: false,\r\n});\r\n\r\nconst isLoading = ref(true);\r\n\r\nfunction handleLoad() {\r\n  isLoading.value = false;\r\n}\r\n</script>\r\n"
    },
    {
      "path": "AppleCard.vue",
      "content": "<template>\r\n  <Teleport to=\"body\">\r\n    <AnimatePresence>\r\n      <div\r\n        v-if=\"open\"\r\n        class=\"fixed inset-0 z-50 h-screen overflow-auto\"\r\n      >\r\n        <Motion\r\n          as=\"div\"\r\n          :initial=\"{ opacity: 0 }\"\r\n          :animate=\"{ opacity: 1 }\"\r\n          :exit=\"{ opacity: 0 }\"\r\n          class=\"fixed inset-0 size-full bg-black/80 backdrop-blur-lg\"\r\n        />\r\n        <Motion\r\n          ref=\"containerRef\"\r\n          as=\"div\"\r\n          :initial=\"{ opacity: 0 }\"\r\n          :animate=\"{ opacity: 1 }\"\r\n          :exit=\"{ opacity: 0 }\"\r\n          :layout-id=\"layout ? `card-${card.title}` : undefined\"\r\n          class=\"relative z-[60] mx-auto my-10 h-fit max-w-5xl rounded-3xl bg-white p-4 font-sans md:p-10 dark:bg-neutral-900\"\r\n        >\r\n          <button\r\n            class=\"sticky right-0 top-4 ml-auto flex size-8 items-center justify-center rounded-full bg-black dark:bg-white\"\r\n            @click=\"handleClose\"\r\n          >\r\n            <Icon\r\n              name=\"tabler:x\"\r\n              class=\"size-6 text-neutral-100 dark:text-neutral-900\"\r\n            />\r\n          </button>\r\n          <Motion\r\n            as=\"div\"\r\n            :layout-id=\"layout ? `category-${card.title}` : undefined\"\r\n            class=\"text-base font-medium text-black dark:text-white\"\r\n          >\r\n            {{ card.category }}\r\n          </Motion>\r\n          <Motion\r\n            as=\"div\"\r\n            :layout-id=\"layout ? `title-${card.title}` : undefined\"\r\n            class=\"mt-4 text-2xl font-semibold text-neutral-700 md:text-5xl dark:text-white\"\r\n          >\r\n            {{ card.title }}\r\n          </Motion>\r\n          <div class=\"py-10\">\r\n            <slot></slot>\r\n          </div>\r\n        </Motion>\r\n      </div>\r\n    </AnimatePresence>\r\n  </Teleport>\r\n\r\n  <Motion\r\n    :layout-id=\"layout ? `card-${card.title}` : undefined\"\r\n    class=\"relative z-10 flex h-80 w-56 flex-col items-start justify-start overflow-hidden rounded-3xl bg-gray-100 md:h-[40rem] md:w-96 dark:bg-neutral-900\"\r\n    @click=\"handleOpen\"\r\n  >\r\n    <div\r\n      class=\"pointer-events-none absolute inset-x-0 top-0 z-30 h-full bg-gradient-to-b from-black/50 via-transparent to-transparent\"\r\n    />\r\n    <div class=\"relative z-40 p-8\">\r\n      <Motion\r\n        :layout-id=\"layout ? `category-${card.category}` : undefined\"\r\n        class=\"text-left font-sans text-sm font-medium text-white md:text-base\"\r\n      >\r\n        {{ card.category }}\r\n      </Motion>\r\n      <Motion\r\n        :layout-id=\"layout ? `title-${card.title}` : undefined\"\r\n        class=\"mt-2 max-w-xs text-left font-sans text-xl font-semibold text-white [text-wrap:balance] md:text-3xl\"\r\n      >\r\n        {{ card.title }}\r\n      </Motion>\r\n    </div>\r\n    <AppleBlurImage\r\n      :src=\"card.src\"\r\n      :alt=\"card.title\"\r\n      class=\"absolute inset-0 z-10 object-cover\"\r\n      :fill=\"true\"\r\n    />\r\n  </Motion>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, inject, onUnmounted, watch } from \"vue\";\r\nimport { Motion, AnimatePresence } from \"motion-v\";\r\nimport { onClickOutside } from \"@vueuse/core\";\r\nimport { CarouselKey } from \"./AppleCarouselContext\";\r\n\r\ninterface Card {\r\n  src: string;\r\n  title: string;\r\n  category: string;\r\n}\r\n\r\ninterface Props {\r\n  card: Card;\r\n  index: number;\r\n  layout?: boolean;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  layout: false,\r\n});\r\n\r\nconst open = ref(false);\r\nconst containerRef = ref<HTMLDivElement | null>(null);\r\nconst carouselContext = inject(CarouselKey);\r\n\r\nif (!carouselContext) {\r\n  throw new Error(\"Card must be used within a Carousel\");\r\n}\r\n\r\nconst { onCardClose, currentIndex } = carouselContext;\r\n\r\nfunction handleKeyDown(event: KeyboardEvent) {\r\n  if (event.key === \"Escape\") {\r\n    handleClose();\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  window.addEventListener(\"keydown\", handleKeyDown);\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener(\"keydown\", handleKeyDown);\r\n});\r\n\r\nwatch(open, (newVal) => {\r\n  if (newVal) {\r\n    document.body.style.overflow = \"hidden\";\r\n  } else {\r\n    document.body.style.overflow = \"auto\";\r\n  }\r\n});\r\n\r\nonClickOutside(containerRef, () => handleClose());\r\n\r\nfunction handleOpen() {\r\n  open.value = true;\r\n}\r\n\r\nfunction handleClose() {\r\n  open.value = false;\r\n  onCardClose(props.index);\r\n}\r\n</script>\r\n"
    },
    {
      "path": "AppleCardCarousel.vue",
      "content": "<template>\r\n  <div class=\"relative w-full\">\r\n    <div\r\n      ref=\"carouselRef\"\r\n      class=\"flex w-full overflow-x-scroll overscroll-x-auto scroll-smooth py-10 [scrollbar-width:none] md:py-20\"\r\n      @scroll=\"checkScrollability\"\r\n    >\r\n      <div\r\n        :class=\"cn('absolute right-0 z-[1000] h-auto w-[5%] overflow-hidden bg-gradient-to-l')\"\r\n      ></div>\r\n\r\n      <div :class=\"cn('flex flex-row justify-start gap-4 pl-4', 'mx-auto max-w-7xl')\">\r\n        <slot></slot>\r\n      </div>\r\n    </div>\r\n    <div class=\"mr-10 flex justify-end gap-2\">\r\n      <button\r\n        class=\"relative z-40 flex size-10 items-center justify-center rounded-full bg-gray-100 disabled:opacity-50\"\r\n        :disabled=\"!canScrollLeft\"\r\n        @click=\"scrollLeft\"\r\n      >\r\n        <Icon\r\n          name=\"tabler:arrow-narrow-left\"\r\n          class=\"size-6 text-gray-500\"\r\n        />\r\n      </button>\r\n      <button\r\n        class=\"relative z-40 flex size-10 items-center justify-center rounded-full bg-gray-100 disabled:opacity-50\"\r\n        :disabled=\"!canScrollRight\"\r\n        @click=\"scrollRight\"\r\n      >\r\n        <Icon\r\n          name=\"tabler:arrow-narrow-right\"\r\n          class=\"size-6 text-gray-500\"\r\n        />\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, watch, provide, computed } from \"vue\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { CarouselKey } from \"./AppleCarouselContext\";\r\n\r\ninterface Props {\r\n  initialScroll?: number;\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  initialScroll: 0,\r\n});\r\n\r\nconst carouselRef = ref<HTMLDivElement | null>(null);\r\nconst canScrollLeft = ref(false);\r\nconst canScrollRight = ref(true);\r\nconst currentIndex = ref(0);\r\n\r\nonMounted(() => {\r\n  if (carouselRef.value) {\r\n    carouselRef.value.scrollLeft = props.initialScroll;\r\n    checkScrollability();\r\n  }\r\n});\r\n\r\nwatch(\r\n  () => props.initialScroll,\r\n  (newVal) => {\r\n    if (carouselRef.value) {\r\n      carouselRef.value.scrollLeft = newVal;\r\n      checkScrollability();\r\n    }\r\n  },\r\n);\r\n\r\nfunction checkScrollability() {\r\n  if (carouselRef.value) {\r\n    const { scrollLeft, scrollWidth, clientWidth } = carouselRef.value;\r\n    canScrollLeft.value = scrollLeft > 0;\r\n    canScrollRight.value = scrollLeft < scrollWidth - clientWidth;\r\n  }\r\n}\r\n\r\nfunction scrollLeft() {\r\n  if (carouselRef.value) {\r\n    carouselRef.value.scrollBy({ left: -300, behavior: \"smooth\" });\r\n  }\r\n}\r\n\r\nfunction scrollRight() {\r\n  if (carouselRef.value) {\r\n    carouselRef.value.scrollBy({ left: 300, behavior: \"smooth\" });\r\n  }\r\n}\r\n\r\nfunction handleCardClose(index: number) {\r\n  if (carouselRef.value) {\r\n    const cardWidth = isMobile.value ? 230 : 384; // (md:w-96)\r\n    const gap = isMobile.value ? 4 : 8;\r\n    const scrollPosition = (cardWidth + gap) * (index + 1);\r\n    carouselRef.value.scrollTo({\r\n      left: scrollPosition,\r\n      behavior: \"smooth\",\r\n    });\r\n    currentIndex.value = index;\r\n  }\r\n}\r\n\r\nconst isMobile = computed(() => {\r\n  return window && window.innerWidth < 768;\r\n});\r\n\r\nprovide(CarouselKey, {\r\n  onCardClose: handleCardClose,\r\n  currentIndex,\r\n});\r\n</script>\r\n"
    },
    {
      "path": "AppleCarouselContext.ts",
      "content": "import { type InjectionKey, type Ref } from \"vue\";\r\n\r\nexport interface CarouselContextType {\r\n  onCardClose: (index: number) => void;\r\n  currentIndex: Ref<number>;\r\n}\r\n\r\nexport const CarouselKey = Symbol() as InjectionKey<CarouselContextType>;\r\n"
    },
    {
      "path": "AppleCarouselItem.vue",
      "content": "<template>\r\n  <Motion\r\n    as=\"div\"\r\n    :initial=\"{\r\n      opacity: 0,\r\n      y: 20,\r\n    }\"\r\n    :animate=\"{\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: {\r\n        duration: 0.5,\r\n        delay: 0.2 * index,\r\n        ease: 'easeOut',\r\n        once: true,\r\n      },\r\n    }\"\r\n    class=\"rounded-3xl last:pr-[5%] md:last:pr-[33%]\"\r\n  >\r\n    <slot></slot>\r\n  </Motion>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { Motion } from \"motion-v\";\r\n\r\ninterface Props {\r\n  index: number;\r\n}\r\n\r\ndefineProps<Props>();\r\n</script>\r\n"
    },
    {
      "path": "index.ts",
      "content": "export { default as AppleCardCarousel } from \"./AppleCardCarousel.vue\";\r\nexport { default as AppleCarouselItem } from \"./AppleCarouselItem.vue\";\r\nexport { default as AppleCard } from \"./AppleCard.vue\";\r\nexport { default as AppleBlurImage } from \"./AppleBlurImage.vue\";\r\nexport * from \"./AppleCarouselContext\";\r\n"
    }
  ],
  "fileCount": 6,
  "contentHash": "82edd74b20d26c18a1fa5f94a374cb842a0f125c"
}
